import{S as It,i as wt,s as yt,k as u,q as E,a as T,l as f,m as c,r as P,h as r,c as I,n as i,b as G,G as t,u as Dt,H as $,P as Mt,N as Je,J as Ke,K as Qe,L as ht,y as _t,M as vt,z as mt,A as pt,g as gt,d as bt,B as kt,O as Nt,I as Et}from"../chunks/index.8a4b620d.js";import{C as Vt}from"../chunks/ContextButton.222f7365.js";import{j as Ht,w as Rt}from"../chunks/singletons.12e7f4be.js";function Pt(o){let e,a,n;return{c(){e=u("img"),this.h()},l(l){e=f(l,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Je(e.src,a=o[2].image)||i(e,"src",a),i(e,"alt",n=o[2].name),i(e,"class","mb-2 aspect-auto rounded-lg object-cover")},m(l,s){G(l,e,s)},p(l,s){s&4&&!Je(e.src,a=l[2].image)&&i(e,"src",a),s&4&&n!==(n=l[2].name)&&i(e,"alt",n)},d(l){l&&r(e)}}}function Ct(o){let e,a,n,l;return{c(){e=u("button"),a=E("Označiť ako navštívené ✓"),this.h()},l(s){e=f(s,"BUTTON",{type:!0,class:!0});var d=c(e);a=P(d,"Označiť ako navštívené ✓"),d.forEach(r),this.h()},h(){i(e,"type","button"),i(e,"class","text-neutral-400 hover:text-neutral-100")},m(s,d){G(s,e,d),t(e,a),n||(l=Ke(e,"click",Qe(o[4])),n=!0)},p:$,d(s){s&&r(e),n=!1,l()}}}function Gt(o){let e,a;return{c(){e=u("p"),a=E("Označiť ako navštívené ✓"),this.h()},l(n){e=f(n,"P",{class:!0});var l=c(e);a=P(l,"Označiť ako navštívené ✓"),l.forEach(r),this.h()},h(){i(e,"class","cursor-not-allowed text-neutral-700")},m(n,l){G(n,e,l),t(e,a)},p:$,d(n){n&&r(e)}}}function jt(o){let e,a,n=o[2].description+"",l,s,d,v,m,p,w,b=o[2].image!==null&&Pt(o);function B(k,_){if(k[0]===!0)return Gt;if(k[3]==="IN_PROGRESS"&&k[1])return Ct}let N=B(o),g=N&&N(o);return{c(){e=u("div"),a=u("p"),l=E(n),s=T(),b&&b.c(),d=T(),v=u("div"),m=u("a"),p=E("Zobraziť na mape ↗"),w=T(),g&&g.c(),this.h()},l(k){e=f(k,"DIV",{class:!0});var _=c(e);a=f(_,"P",{class:!0});var S=c(a);l=P(S,n),S.forEach(r),s=I(_),b&&b.l(_),d=I(_),v=f(_,"DIV",{class:!0});var H=c(v);m=f(H,"A",{href:!0,target:!0,class:!0});var V=c(m);p=P(V,"Zobraziť na mape ↗"),V.forEach(r),w=I(H),g&&g.l(H),H.forEach(r),_.forEach(r),this.h()},h(){i(a,"class","mb-2"),i(m,"href","http://maps.google.com/maps?z=12&t=m&q=loc:38.9419+-78.3020"),i(m,"target","_blank"),i(m,"class","text-neutral-400 hover:text-neutral-100"),i(v,"class","flex items-center justify-between"),i(e,"class","flex basis-4/6 flex-col")},m(k,_){G(k,e,_),t(e,a),t(a,l),t(e,s),b&&b.m(e,null),t(e,d),t(e,v),t(v,m),t(m,p),t(v,w),g&&g.m(v,null)},p(k,[_]){_&4&&n!==(n=k[2].description+"")&&Dt(l,n),k[2].image!==null?b?b.p(k,_):(b=Pt(k),b.c(),b.m(e,d)):b&&(b.d(1),b=null),N===(N=B(k))&&g?g.p(k,_):(g&&g.d(1),g=N&&N(k),g&&(g.c(),g.m(v,null)))},i:$,o:$,d(k){k&&r(e),b&&b.d(),g&&g.d()}}}function Bt(o,e,a){let{ongoingTour:n}=e,{mapPoint:l}=e,{visited:s=!1}=e,{status:d}=e;const v=Mt();function m(){a(0,s=!0),n.checkMapPoint(l.name),v("update",{})}return o.$$set=p=>{"ongoingTour"in p&&a(1,n=p.ongoingTour),"mapPoint"in p&&a(2,l=p.mapPoint),"visited"in p&&a(0,s=p.visited),"status"in p&&a(3,d=p.status)},[s,n,l,d,m]}class Ut extends It{constructor(e){super(),wt(this,e,Bt,jt,yt,{ongoingTour:1,mapPoint:2,visited:0,status:3})}}function St(o,e,a){const n=o.slice();return n[13]=e[a][0],n[14]=e[a][1],n}function Tt(o){let e,a=o[3](o[14])+"",n,l,s,d,v;function m(){return o[11](o[14])}return{c(){e=u("button"),n=E(a),l=T(),this.h()},l(p){e=f(p,"BUTTON",{type:!0,class:!0});var w=c(e);n=P(w,a),l=I(w),w.forEach(r),this.h()},h(){i(e,"type","button"),i(e,"class",s="cursor-pointer "+(o[1].name===o[14].name?"stop-selected":"hover:text-neutral-100"))},m(p,w){G(p,e,w),t(e,n),t(e,l),d||(v=Ke(e,"click",Qe(m)),d=!0)},p(p,w){o=p,w&8&&a!==(a=o[3](o[14])+"")&&Dt(n,a),w&2&&s!==(s="cursor-pointer "+(o[1].name===o[14].name?"stop-selected":"hover:text-neutral-100"))&&i(e,"class",s)},d(p){p&&r(e),d=!1,v()}}}function At(o){let e,a=o[4].averageRating+"",n,l;return{c(){e=u("p"),n=E(a),l=E(" z 5")},l(s){e=f(s,"P",{});var d=c(e);n=P(d,a),l=P(d," z 5"),d.forEach(r)},m(s,d){G(s,e,d),t(e,n),t(e,l)},p:$,d(s){s&&r(e)}}}function qt(o){let e,a;return{c(){e=u("p"),a=E("Žiadne hodnotenie")},l(n){e=f(n,"P",{});var l=c(e);a=P(l,"Žiadne hodnotenie"),l.forEach(r)},m(n,l){G(n,e,l),t(e,a)},p:$,d(n){n&&r(e)}}}function Zt(o){let e,a;return{c(){e=u("p"),a=E("Dostupný pre všetkých")},l(n){e=f(n,"P",{});var l=c(e);a=P(l,"Dostupný pre všetkých"),l.forEach(r)},m(n,l){G(n,e,l),t(e,a)},d(n){n&&r(e)}}}function Lt(o){let e,a;return{c(){e=u("p"),a=E("Platený")},l(n){e=f(n,"P",{});var l=c(e);a=P(l,"Platený"),l.forEach(r)},m(n,l){G(n,e,l),t(e,a)},d(n){n&&r(e)}}}function Wt(o){let e,a,n,l,s,d,v,m,p,w,b,B,N,g,k,_=o[4].name+"",S,H,V,be,K,Xe=o[4].description+"",ke,Ee,U,Q,Pe,Se,A,X,q,Te,j,Ie,M,Z,ee,we,ye,De,L,te,Oe,ze,ne,Ye=o[4].ownerUsername+"",Me,Ne,W,ae,Ve,He,oe,xe=o[4].mapPoints.size+"",Re,Ce,F,le,Ge,je,Y,$e=o[4].approximateLength+"",Be,Ue,Ae,J,se,qe,Ze,ce,Le,et;V=new Vt({props:{tour:o[4],status:o[0]}});let x=[...o[4].mapPoints],D=[];for(let h=0;h<x.length;h+=1)D[h]=Tt(St(o,x,h));j=new Ut({props:{mapPoint:o[1],visited:o[6](o[1].name),status:o[0],ongoingTour:o[2]}}),j.$on("update",o[8]);function Ot(h,O){return h[4].averageRating===-1?qt:At}let re=Ot(o)(o);function zt(h,O){return h[4].isPaidOnly===!0?Lt:Zt}let ue=zt(o)(o);return{c(){e=u("main"),a=u("h1"),n=E("City Guide Walks"),l=T(),s=u("section"),d=u("button"),v=ht("svg"),m=ht("path"),p=E(`\r
            Späť`),w=T(),b=u("img"),N=T(),g=u("div"),k=u("h2"),S=E(_),H=T(),_t(V.$$.fragment),be=T(),K=u("p"),ke=E(Xe),Ee=T(),U=u("section"),Q=u("h3"),Pe=E("Zastávky"),Se=T(),A=u("section"),X=u("aside"),q=u("div");for(let h=0;h<D.length;h+=1)D[h].c();Te=T(),_t(j.$$.fragment),Ie=T(),M=u("div"),Z=u("div"),ee=u("h3"),we=E("Hodnotenie"),ye=T(),re.c(),De=T(),L=u("div"),te=u("h3"),Oe=E("Vytvoril"),ze=T(),ne=u("p"),Me=E(Ye),Ne=T(),W=u("div"),ae=u("h3"),Ve=E("Celkový počet zastávok"),He=T(),oe=u("p"),Re=E(xe),Ce=T(),F=u("div"),le=u("h3"),Ge=E("Približná dĺžka trvania"),je=T(),Y=u("p"),Be=E($e),Ue=E(" minút"),Ae=T(),J=u("div"),se=u("h3"),qe=E("Typ"),Ze=T(),ue.c(),this.h()},l(h){e=f(h,"MAIN",{class:!0});var O=c(e);a=f(O,"H1",{class:!0});var R=c(a);n=P(R,"City Guide Walks"),R.forEach(r),l=I(O),s=f(O,"SECTION",{class:!0});var y=c(s);d=f(y,"BUTTON",{type:!0,class:!0});var z=c(d);v=vt(z,"svg",{width:!0,height:!0,viewBox:!0,"stroke-width":!0,fill:!0,xmlns:!0});var ie=c(v);m=vt(ie,"path",{d:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),c(m).forEach(r),ie.forEach(r),p=P(z,`\r
            Späť`),z.forEach(r),w=I(y),b=f(y,"IMG",{src:!0,class:!0,alt:!0}),N=I(y),g=f(y,"DIV",{class:!0});var fe=c(g);k=f(fe,"H2",{});var tt=c(k);S=P(tt,_),tt.forEach(r),H=I(fe),mt(V.$$.fragment,fe),fe.forEach(r),be=I(y),K=f(y,"P",{class:!0});var nt=c(K);ke=P(nt,Xe),nt.forEach(r),Ee=I(y),U=f(y,"SECTION",{class:!0});var de=c(U);Q=f(de,"H3",{class:!0});var at=c(Q);Pe=P(at,"Zastávky"),at.forEach(r),Se=I(de),A=f(de,"SECTION",{class:!0});var he=c(A);X=f(he,"ASIDE",{class:!0});var ot=c(X);q=f(ot,"DIV",{class:!0});var lt=c(q);for(let Fe=0;Fe<D.length;Fe+=1)D[Fe].l(lt);lt.forEach(r),ot.forEach(r),Te=I(he),mt(j.$$.fragment,he),he.forEach(r),de.forEach(r),Ie=I(y),M=f(y,"DIV",{class:!0});var C=c(M);Z=f(C,"DIV",{});var _e=c(Z);ee=f(_e,"H3",{});var st=c(ee);we=P(st,"Hodnotenie"),st.forEach(r),ye=I(_e),re.l(_e),_e.forEach(r),De=I(C),L=f(C,"DIV",{});var ve=c(L);te=f(ve,"H3",{});var rt=c(te);Oe=P(rt,"Vytvoril"),rt.forEach(r),ze=I(ve),ne=f(ve,"P",{});var it=c(ne);Me=P(it,Ye),it.forEach(r),ve.forEach(r),Ne=I(C),W=f(C,"DIV",{});var me=c(W);ae=f(me,"H3",{});var ct=c(ae);Ve=P(ct,"Celkový počet zastávok"),ct.forEach(r),He=I(me),oe=f(me,"P",{});var ut=c(oe);Re=P(ut,xe),ut.forEach(r),me.forEach(r),Ce=I(C),F=f(C,"DIV",{});var pe=c(F);le=f(pe,"H3",{});var ft=c(le);Ge=P(ft,"Približná dĺžka trvania"),ft.forEach(r),je=I(pe),Y=f(pe,"P",{});var We=c(Y);Be=P(We,$e),Ue=P(We," minút"),We.forEach(r),pe.forEach(r),Ae=I(C),J=f(C,"DIV",{});var ge=c(J);se=f(ge,"H3",{});var dt=c(se);qe=P(dt,"Typ"),dt.forEach(r),Ze=I(ge),ue.l(ge),ge.forEach(r),C.forEach(r),y.forEach(r),O.forEach(r),this.h()},h(){i(a,"class","mb-8 text-4xl font-bold"),i(m,"d","M21 12H3m0 0l8.5-8.5M3 12l8.5 8.5"),i(m,"stroke-width","1.5"),i(m,"stroke-linecap","round"),i(m,"stroke-linejoin","round"),i(v,"width","24px"),i(v,"height","24px"),i(v,"viewBox","0 0 24 24"),i(v,"stroke-width","1.5"),i(v,"fill","none"),i(v,"xmlns","http://www.w3.org/2000/svg"),i(d,"type","button"),i(d,"class","flex items-center gap-2 stroke-neutral-400 text-neutral-400 hover:stroke-neutral-100 hover:text-neutral-100"),Je(b.src,B="https://sacr3-files.s3-eu-west-1.amazonaws.com/_processed_/csm_TT.korzo_93c23fef75.jpg")||i(b,"src",B),i(b,"class","my-4 aspect-auto max-h-64 w-full rounded-lg object-cover"),i(b,"alt","Trnava"),i(g,"class","mb-2 flex items-center justify-between gap-4"),i(K,"class","mb-4 border-b border-neutral-800 pb-4"),i(Q,"class","mb-2"),i(q,"class","text-neutral-400"),i(X,"class","grow basis-2/6"),i(A,"class","flex justify-between gap-32"),i(U,"class","mb-4 border-b border-neutral-800 pb-4"),i(M,"class","grid grid-cols-3 gap-6"),i(s,"class","w-full"),i(e,"class","flex items-center flex-col py-8 mx-48")},m(h,O){G(h,e,O),t(e,a),t(a,n),t(e,l),t(e,s),t(s,d),t(d,v),t(v,m),t(d,p),t(s,w),t(s,b),t(s,N),t(s,g),t(g,k),t(k,S),t(g,H),pt(V,g,null),t(s,be),t(s,K),t(K,ke),t(s,Ee),t(s,U),t(U,Q),t(Q,Pe),t(U,Se),t(U,A),t(A,X),t(X,q);for(let R=0;R<D.length;R+=1)D[R]&&D[R].m(q,null);t(A,Te),pt(j,A,null),t(s,Ie),t(s,M),t(M,Z),t(Z,ee),t(ee,we),t(Z,ye),re.m(Z,null),t(M,De),t(M,L),t(L,te),t(te,Oe),t(L,ze),t(L,ne),t(ne,Me),t(M,Ne),t(M,W),t(W,ae),t(ae,Ve),t(W,He),t(W,oe),t(oe,Re),t(M,Ce),t(M,F),t(F,le),t(le,Ge),t(F,je),t(F,Y),t(Y,Be),t(Y,Ue),t(M,Ae),t(M,J),t(J,se),t(se,qe),t(J,Ze),ue.m(J,null),ce=!0,Le||(et=Ke(d,"click",Qe(Ft)),Le=!0)},p(h,[O]){const R={};if(O&1&&(R.status=h[0]),V.$set(R),O&154){x=[...h[4].mapPoints];let z;for(z=0;z<x.length;z+=1){const ie=St(h,x,z);D[z]?D[z].p(ie,O):(D[z]=Tt(ie),D[z].c(),D[z].m(q,null))}for(;z<D.length;z+=1)D[z].d(1);D.length=x.length}const y={};O&2&&(y.mapPoint=h[1]),O&2&&(y.visited=h[6](h[1].name)),O&1&&(y.status=h[0]),O&4&&(y.ongoingTour=h[2]),j.$set(y),re.p(h,O)},i(h){ce||(gt(V.$$.fragment,h),gt(j.$$.fragment,h),ce=!0)},o(h){bt(V.$$.fragment,h),bt(j.$$.fragment,h),ce=!1},d(h){h&&r(e),kt(V),Nt(D,h),kt(j),re.d(),ue.d(),Le=!1,et()}}}function Ft(){history.back()}function Jt(o,e,a){let n,l,{data:s}=e;const d=parseInt(s.tourId);let v=ServiceManager.getTourService().getTour(d),m=ServiceManager.getTourService().getUserTourRelationshipString(d);console.log(m);let p=Rt(void 0);Et(o,p,_=>a(2,n=_)),m=="IN_PROGRESS"&&(p.set(ServiceManager.getTourService().getOngoingTour(d)),console.log(n));let w=v.mapPoints.get(0);console.log(w);function b(_){if(console.log("hasVisited: ",_),console.log(n),m=="IN_PROGRESS"){for(let S=0;S<n.visitedMapPoints.length;S++)if(console.log("Checking: ",n.visitedMapPoints.at(S).name),n.visitedMapPoints.at(S).name==_)return!0}return!1}function B(_){console.log(_);for(let S=0;S<v.mapPoints.size;S++)console.log(v.mapPoints.get(S)),v.mapPoints.get(S).name==_&&(a(1,w=v.mapPoints.get(S)),console.log("Choosing: ",w))}function N(_){console.log("HANDLING UPDATE"),m=="IN_PROGRESS"&&(p.set(ServiceManager.getTourService().getOngoingTour(d)),a(0,m=ServiceManager.getTourService().getUserTourRelationshipString(d)),console.log(n))}const g=Ht(p,_=>S=>m=="FINISHED"?`${S.name} ✓`:m!="IN_PROGRESS"?`${S.name}`:`${S.name} ${_.visitedMapPoints.some(H=>H.name===S.name)?"✓":""}`);Et(o,g,_=>a(3,l=_));const k=_=>B(_.name);return o.$$set=_=>{"data"in _&&a(10,s=_.data)},[m,w,n,l,v,p,b,B,N,g,s,k]}class $t extends It{constructor(e){super(),wt(this,e,Jt,Wt,yt,{data:10})}}export{$t as default};
//# sourceMappingURL=tours-_tourId_-page.svelte.156e5ff1.js.map
