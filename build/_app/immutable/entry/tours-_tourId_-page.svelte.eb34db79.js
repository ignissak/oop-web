import{S as ft,i as ht,s as dt,k as v,q as I,a as S,l as b,m,r as D,h,c as M,n as i,b as N,G as a,u as ie,H as ce,P as qt,N as ct,J as q,K as ue,C as Dt,Q as Zt,R as Wt,D as Ot,E as yt,F as Nt,g as Se,d as Me,T as Jt,U as Kt,w as Gt,V as Qt,y as st,L as le,z as at,M as oe,A as rt,W as Xt,B as it,O as ut,I as Rt}from"../chunks/index.045d69d8.js";import{C as Yt}from"../chunks/ContextButton.67152d87.js";import{j as $t,w as xt}from"../chunks/singletons.bb784fe0.js";function zt(o){let e,t,l;return{c(){e=v("img"),this.h()},l(n){e=b(n,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){ct(e.src,t=o[2].image)||i(e,"src",t),i(e,"alt",l=o[2].name),i(e,"class","mb-2 aspect-auto rounded-lg object-cover")},m(n,u){N(n,e,u)},p(n,u){u&4&&!ct(e.src,t=n[2].image)&&i(e,"src",t),u&4&&l!==(l=n[2].name)&&i(e,"alt",l)},d(n){n&&h(e)}}}function el(o){let e,t,l,n;return{c(){e=v("button"),t=I("Označiť ako navštívené ✓"),this.h()},l(u){e=b(u,"BUTTON",{type:!0,class:!0});var _=m(e);t=D(_,"Označiť ako navštívené ✓"),_.forEach(h),this.h()},h(){i(e,"type","button"),i(e,"class","text-neutral-400 hover:text-neutral-100")},m(u,_){N(u,e,_),a(e,t),l||(n=q(e,"click",ue(o[4])),l=!0)},p:ce,d(u){u&&h(e),l=!1,n()}}}function tl(o){let e,t;return{c(){e=v("p"),t=I("Označiť ako navštívené ✓"),this.h()},l(l){e=b(l,"P",{class:!0});var n=m(e);t=D(n,"Označiť ako navštívené ✓"),n.forEach(h),this.h()},h(){i(e,"class","cursor-not-allowed text-neutral-700")},m(l,n){N(l,e,n),a(e,t)},p:ce,d(l){l&&h(e)}}}function ll(o){let e,t,l=o[2].description+"",n,u,_,d,r,c,s,g,f=o[2].image!==null&&zt(o);function T(E,w){if(E[0]===!0)return tl;if(E[3]==="IN_PROGRESS"&&E[1])return el}let z=T(o),y=z&&z(o);return{c(){e=v("div"),t=v("p"),n=I(l),u=S(),f&&f.c(),_=S(),d=v("div"),r=v("a"),c=I("Zobraziť na mape ↗"),g=S(),y&&y.c(),this.h()},l(E){e=b(E,"DIV",{class:!0});var w=m(e);t=b(w,"P",{class:!0});var C=m(t);n=D(C,l),C.forEach(h),u=M(w),f&&f.l(w),_=M(w),d=b(w,"DIV",{class:!0});var j=m(d);r=b(j,"A",{href:!0,target:!0,class:!0});var Z=m(r);c=D(Z,"Zobraziť na mape ↗"),Z.forEach(h),g=M(j),y&&y.l(j),j.forEach(h),w.forEach(h),this.h()},h(){i(t,"class","mb-2"),i(r,"href",s="http://maps.google.com/maps?z=12&t=m&q=loc:"+o[2].getLatitude()+"+"+o[2].getLongitude()),i(r,"target","_blank"),i(r,"class","text-neutral-400 hover:text-neutral-100"),i(d,"class","flex items-center justify-between"),i(e,"class","flex basis-4/6 flex-col")},m(E,w){N(E,e,w),a(e,t),a(t,n),a(e,u),f&&f.m(e,null),a(e,_),a(e,d),a(d,r),a(r,c),a(d,g),y&&y.m(d,null)},p(E,[w]){w&4&&l!==(l=E[2].description+"")&&ie(n,l),E[2].image!==null?f?f.p(E,w):(f=zt(E),f.c(),f.m(e,_)):f&&(f.d(1),f=null),w&4&&s!==(s="http://maps.google.com/maps?z=12&t=m&q=loc:"+E[2].getLatitude()+"+"+E[2].getLongitude())&&i(r,"href",s),z===(z=T(E))&&y?y.p(E,w):(y&&y.d(1),y=z&&z(E),y&&(y.c(),y.m(d,null)))},i:ce,o:ce,d(E){E&&h(e),f&&f.d(),y&&y.d()}}}function ol(o,e,t){let{ongoingTour:l}=e,{mapPoint:n}=e,{visited:u=!1}=e,{status:_}=e;const d=qt();function r(){t(0,u=!0),console.log(l),l.checkMapPoint(n.name),console.log("Marking as visited..."),d("update",{})}return o.$$set=c=>{"ongoingTour"in c&&t(1,l=c.ongoingTour),"mapPoint"in c&&t(2,n=c.mapPoint),"visited"in c&&t(0,u=c.visited),"status"in c&&t(3,_=c.status)},[u,l,n,_,r]}class nl extends ft{constructor(e){super(),ht(this,e,ol,ll,dt,{ongoingTour:1,mapPoint:2,visited:0,status:3})}}const sl=o=>({}),Bt=o=>({});function al(o){let e,t,l,n,u,_;const d=o[3].default,r=Dt(d,o,o[2],null),c=o[3].button,s=Dt(c,o,o[2],Bt);return{c(){e=v("dialog"),t=v("div"),r&&r.c(),l=S(),s&&s.c(),this.h()},l(g){e=b(g,"DIALOG",{class:!0});var f=m(e);t=b(f,"DIV",{class:!0});var T=m(t);r&&r.l(T),l=M(T),s&&s.l(T),T.forEach(h),f.forEach(h),this.h()},h(){i(t,"class","flex flex-col justify-center items-center"),i(e,"class","border-0 rounded-lg p-8 bg-neutral-800 shadow-lg max-w-lg text-neutral-100 fill-neutral-100 stroke-neutral-100")},m(g,f){N(g,e,f),a(e,t),r&&r.m(t,null),a(t,l),s&&s.m(t,null),o[5](e),n=!0,u||(_=[q(t,"click",Zt(o[4])),q(e,"close",o[6]),q(e,"click",Wt(o[7]))],u=!0)},p(g,[f]){r&&r.p&&(!n||f&4)&&Ot(r,d,g,g[2],n?Nt(d,g[2],f,null):yt(g[2]),null),s&&s.p&&(!n||f&4)&&Ot(s,c,g,g[2],n?Nt(c,g[2],f,sl):yt(g[2]),Bt)},i(g){n||(Se(r,g),Se(s,g),n=!0)},o(g){Me(r,g),Me(s,g),n=!1},d(g){g&&h(e),r&&r.d(g),s&&s.d(g),o[5](null),u=!1,Jt(_)}}}function rl(o,e,t){let{$$slots:l={},$$scope:n}=e,{showModal:u}=e,_;function d(g){Kt.call(this,o,g)}function r(g){Gt[g?"unshift":"push"](()=>{_=g,t(1,_)})}const c=()=>t(0,u=!1),s=()=>_.close();return o.$$set=g=>{"showModal"in g&&t(0,u=g.showModal),"$$scope"in g&&t(2,n=g.$$scope)},o.$$.update=()=>{o.$$.dirty&3&&_&&u&&_.showModal()},[u,_,n,l,d,r,c,s]}class il extends ft{constructor(e){super(),ht(this,e,rl,al,dt,{showModal:0})}}function Ht(o,e,t){const l=o.slice();return l[23]=e[t][0],l[24]=e[t][1],l}function Vt(o,e,t){const l=o.slice();return l[27]=e[t],l[29]=t,l}function jt(o,e,t){const l=o.slice();return l[27]=e[t],l[29]=t,l}function Ut(o){let e,t,l,n,u;function _(){return o[17](o[29])}return{c(){e=v("button"),t=le("svg"),l=le("path"),this.h()},l(d){e=b(d,"BUTTON",{type:!0});var r=m(e);t=oe(r,"svg",{xmlns:!0,viewBox:!0,class:!0});var c=m(t);l=oe(c,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),m(l).forEach(h),c.forEach(h),r.forEach(h),this.h()},h(){i(l,"fill-rule","evenodd"),i(l,"d","M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.007 5.404.433c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.433 2.082-5.006z"),i(l,"clip-rule","evenodd"),i(t,"xmlns","http://www.w3.org/2000/svg"),i(t,"viewBox","0 0 24 24"),i(t,"class","w-6 h-6"),i(e,"type","button")},m(d,r){N(d,e,r),a(e,t),a(t,l),n||(u=q(e,"click",ue(_)),n=!0)},p(d,r){o=d},d(d){d&&h(e),n=!1,u()}}}function Ct(o){let e,t,l,n,u,_;function d(){return o[18](o[29])}return{c(){e=v("button"),t=le("svg"),l=le("path"),n=S(),this.h()},l(r){e=b(r,"BUTTON",{type:!0});var c=m(e);t=oe(c,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,class:!0});var s=m(t);l=oe(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),m(l).forEach(h),s.forEach(h),n=M(c),c.forEach(h),this.h()},h(){i(l,"stroke-linecap","round"),i(l,"stroke-linejoin","round"),i(l,"d","M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z"),i(t,"xmlns","http://www.w3.org/2000/svg"),i(t,"fill","none"),i(t,"viewBox","0 0 24 24"),i(t,"stroke-width","1.5"),i(t,"class","w-6 h-6"),i(e,"type","button")},m(r,c){N(r,e,c),a(e,t),a(t,l),a(e,n),u||(_=q(e,"click",ue(d)),u=!0)},p(r,c){o=r},d(r){r&&h(e),u=!1,_()}}}function cl(o){let e,t,l,n,u,_=Array(o[0]),d=[];for(let s=0;s<_.length;s+=1)d[s]=Ut(jt(o,_,s));let r=Array(o[5]),c=[];for(let s=0;s<r.length;s+=1)c[s]=Ct(Vt(o,r,s));return{c(){e=v("h2"),t=I("Hodnotenie výletu"),l=S(),n=v("div");for(let s=0;s<d.length;s+=1)d[s].c();u=S();for(let s=0;s<c.length;s+=1)c[s].c();this.h()},l(s){e=b(s,"H2",{class:!0});var g=m(e);t=D(g,"Hodnotenie výletu"),g.forEach(h),l=M(s),n=b(s,"DIV",{class:!0});var f=m(n);for(let T=0;T<d.length;T+=1)d[T].l(f);u=M(f);for(let T=0;T<c.length;T+=1)c[T].l(f);f.forEach(h),this.h()},h(){i(e,"class","text-xl font-semibold mb-4"),i(n,"class","flex items-center gap-1")},m(s,g){N(s,e,g),a(e,t),N(s,l,g),N(s,n,g);for(let f=0;f<d.length;f+=1)d[f]&&d[f].m(n,null);a(n,u);for(let f=0;f<c.length;f+=1)c[f]&&c[f].m(n,null)},p(s,g){if(g[0]&1){_=Array(s[0]);let f;for(f=0;f<_.length;f+=1){const T=jt(s,_,f);d[f]?d[f].p(T,g):(d[f]=Ut(T),d[f].c(),d[f].m(n,u))}for(;f<d.length;f+=1)d[f].d(1);d.length=_.length}if(g[0]&33){r=Array(s[5]);let f;for(f=0;f<r.length;f+=1){const T=Vt(s,r,f);c[f]?c[f].p(T,g):(c[f]=Ct(T),c[f].c(),c[f].m(n,null))}for(;f<c.length;f+=1)c[f].d(1);c.length=r.length}},d(s){s&&h(e),s&&h(l),s&&h(n),ut(d,s),ut(c,s)}}}function ul(o){let e,t,l,n;return{c(){e=v("button"),t=I("Uložiť"),this.h()},l(u){e=b(u,"BUTTON",{slot:!0,class:!0});var _=m(e);t=D(_,"Uložiť"),_.forEach(h),this.h()},h(){i(e,"slot","button"),i(e,"class","rounded-lg mt-6 border border-neutral-600 hover:bg-neutral-600 py-1.5 px-3 w-full")},m(u,_){N(u,e,_),a(e,t),l||(n=q(e,"click",ue(o[16])),l=!0)},p:ce,d(u){u&&h(e),l=!1,n()}}}function Lt(o){let e,t,l,n,u,_;return{c(){e=v("button"),t=le("svg"),l=le("path"),n=I(`\r
                        Ohodnotiť`),this.h()},l(d){e=b(d,"BUTTON",{type:!0,class:!0});var r=m(e);t=oe(r,"svg",{width:!0,height:!0,"stroke-width":!0,viewBox:!0,fill:!0,xmlns:!0});var c=m(t);l=oe(c,"path",{d:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),m(l).forEach(h),c.forEach(h),n=D(r,`\r
                        Ohodnotiť`),r.forEach(h),this.h()},h(){i(l,"d","M8.587 8.236l2.598-5.232a.911.911 0 011.63 0l2.598 5.232 5.808.844a.902.902 0 01.503 1.542l-4.202 4.07.992 5.75c.127.738-.653 1.3-1.32.952L12 18.678l-5.195 2.716c-.666.349-1.446-.214-1.319-.953l.992-5.75-4.202-4.07a.902.902 0 01.503-1.54l5.808-.845z"),i(l,"stroke-width","1.5"),i(l,"stroke-linecap","round"),i(l,"stroke-linejoin","round"),i(t,"width","20px"),i(t,"height","20px"),i(t,"stroke-width","1.5"),i(t,"viewBox","0 0 24 24"),i(t,"fill","none"),i(t,"xmlns","http://www.w3.org/2000/svg"),i(e,"type","button"),i(e,"class","action-button")},m(d,r){N(d,e,r),a(e,t),a(t,l),a(e,n),u||(_=q(e,"click",ue(o[20])),u=!0)},p:ce,d(d){d&&h(e),u=!1,_()}}}function At(o){let e,t=o[7](o[24])+"",l,n,u,_,d;function r(){return o[21](o[24])}return{c(){e=v("button"),l=I(t),n=S(),this.h()},l(c){e=b(c,"BUTTON",{type:!0,class:!0});var s=m(e);l=D(s,t),n=M(s),s.forEach(h),this.h()},h(){i(e,"type","button"),i(e,"class",u="cursor-pointer block "+(o[3].name===o[24].name?"stop-selected":"hover:text-neutral-100"))},m(c,s){N(c,e,s),a(e,l),a(e,n),_||(d=q(e,"click",ue(r)),_=!0)},p(c,s){o=c,s[0]&130&&t!==(t=o[7](o[24])+"")&&ie(l,t),s[0]&10&&u!==(u="cursor-pointer block "+(o[3].name===o[24].name?"stop-selected":"hover:text-neutral-100"))&&i(e,"class",u)},d(c){c&&h(e),_=!1,d()}}}function fl(o){let e,t=(o[1].averageRating%1===0?o[1].averageRating.toFixed(0):o[1].averageRating.toFixed(2))+"",l,n;return{c(){e=v("p"),l=I(t),n=I(" z 5")},l(u){e=b(u,"P",{});var _=m(e);l=D(_,t),n=D(_," z 5"),_.forEach(h)},m(u,_){N(u,e,_),a(e,l),a(e,n)},p(u,_){_[0]&2&&t!==(t=(u[1].averageRating%1===0?u[1].averageRating.toFixed(0):u[1].averageRating.toFixed(2))+"")&&ie(l,t)},d(u){u&&h(e)}}}function hl(o){let e,t;return{c(){e=v("p"),t=I("Žiadne hodnotenie")},l(l){e=b(l,"P",{});var n=m(e);t=D(n,"Žiadne hodnotenie"),n.forEach(h)},m(l,n){N(l,e,n),a(e,t)},p:ce,d(l){l&&h(e)}}}function dl(o){let e,t;return{c(){e=v("p"),t=I("Dostupný pre všetkých")},l(l){e=b(l,"P",{});var n=m(e);t=D(n,"Dostupný pre všetkých"),n.forEach(h)},m(l,n){N(l,e,n),a(e,t)},d(l){l&&h(e)}}}function _l(o){let e,t;return{c(){e=v("p"),t=I("Platený")},l(l){e=b(l,"P",{});var n=m(e);t=D(n,"Platený"),n.forEach(h)},m(l,n){N(l,e,n),a(e,t)},d(l){l&&h(e)}}}function gl(o){let e,t,l,n,u,_,d,r,c,s,g,f,T,z,y,E,w,C,j=o[1].name+"",Z,ge,L,F,pe,me,k,O=o[1].description+"",W,Ce,Y,fe,Le,Ae,$,he,ne,Ge,J,Fe,U,x,ve,qe,Ze,We,se,be,Je,Ke,ke,we=o[1].mapPoints.size+"",Ie,Qe,ae,Ee,Xe,Ye,de,Pe=o[1].approximateLength+"",De,$e,xe,ee,Te,et,tt,Oe,K,lt,_t;function Ft(p){o[19](p)}let gt={$$slots:{button:[ul],default:[cl]},$$scope:{ctx:o}};o[4]!==void 0&&(gt.showModal=o[4]),e=new il({props:gt}),Gt.push(()=>Qt(e,"showModal",Ft)),F=new Yt({props:{tour:o[1],status:o[2]}});let B=o[2]==="FINISHED"&&Lt(o),_e=[...o[1].mapPoints],R=[];for(let p=0;p<_e.length;p+=1)R[p]=At(Ht(o,_e,p));J=new nl({props:{mapPoint:o[3],visited:o[9](o[3].name),status:o[2],ongoingTour:o[6]}}),J.$on("update",o[11]);function pt(p,P){return p[1].averageRating===-1?hl:fl}let ye=pt(o),A=ye(o);function mt(p,P){return p[1].isPaidOnly===!0?_l:dl}let Ne=mt(o),Q=Ne(o);return{c(){st(e.$$.fragment),l=S(),n=v("main"),u=v("h1"),_=I("City Guide Walks"),d=S(),r=v("section"),c=v("button"),s=le("svg"),g=le("path"),f=I(`\r
            Späť`),T=S(),z=v("img"),E=S(),w=v("div"),C=v("h2"),Z=I(j),ge=S(),L=v("div"),st(F.$$.fragment),pe=S(),B&&B.c(),me=S(),k=v("p"),W=I(O),Ce=S(),Y=v("section"),fe=v("h3"),Le=I("Zastávky"),Ae=S(),$=v("section"),he=v("aside"),ne=v("div");for(let p=0;p<R.length;p+=1)R[p].c();Ge=S(),st(J.$$.fragment),Fe=S(),U=v("div"),x=v("div"),ve=v("h3"),qe=I("Hodnotenie"),Ze=S(),A.c(),We=S(),se=v("div"),be=v("h3"),Je=I("Celkový počet zastávok"),Ke=S(),ke=v("p"),Ie=I(we),Qe=S(),ae=v("div"),Ee=v("h3"),Xe=I("Približná dĺžka trvania"),Ye=S(),de=v("p"),De=I(Pe),$e=I(" minút"),xe=S(),ee=v("div"),Te=v("h3"),et=I("Typ"),tt=S(),Q.c(),this.h()},l(p){at(e.$$.fragment,p),l=M(p),n=b(p,"MAIN",{class:!0});var P=m(n);u=b(P,"H1",{class:!0});var G=m(u);_=D(G,"City Guide Walks"),G.forEach(h),d=M(P),r=b(P,"SECTION",{class:!0});var H=m(r);c=b(H,"BUTTON",{type:!0,class:!0});var X=m(c);s=oe(X,"svg",{width:!0,height:!0,viewBox:!0,"stroke-width":!0,fill:!0,xmlns:!0});var V=m(s);g=oe(V,"path",{d:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),m(g).forEach(h),V.forEach(h),f=D(X,`\r
            Späť`),X.forEach(h),T=M(H),z=b(H,"IMG",{src:!0,class:!0,alt:!0}),E=M(H),w=b(H,"DIV",{class:!0});var re=m(w);C=b(re,"H2",{});var vt=m(C);Z=D(vt,j),vt.forEach(h),ge=M(re),L=b(re,"DIV",{class:!0});var Re=m(L);at(F.$$.fragment,Re),pe=M(Re),B&&B.l(Re),Re.forEach(h),re.forEach(h),me=M(H),k=b(H,"P",{class:!0});var bt=m(k);W=D(bt,O),bt.forEach(h),Ce=M(H),Y=b(H,"SECTION",{class:!0});var ze=m(Y);fe=b(ze,"H3",{class:!0});var kt=m(fe);Le=D(kt,"Zastávky"),kt.forEach(h),Ae=M(ze),$=b(ze,"SECTION",{class:!0});var Be=m($);he=b(Be,"ASIDE",{class:!0});var wt=m(he);ne=b(wt,"DIV",{class:!0});var Et=m(ne);for(let nt=0;nt<R.length;nt+=1)R[nt].l(Et);Et.forEach(h),wt.forEach(h),Ge=M(Be),at(J.$$.fragment,Be),Be.forEach(h),ze.forEach(h),Fe=M(H),U=b(H,"DIV",{class:!0});var te=m(U);x=b(te,"DIV",{});var He=m(x);ve=b(He,"H3",{});var Pt=m(ve);qe=D(Pt,"Hodnotenie"),Pt.forEach(h),Ze=M(He),A.l(He),He.forEach(h),We=M(te),se=b(te,"DIV",{});var Ve=m(se);be=b(Ve,"H3",{});var Tt=m(be);Je=D(Tt,"Celkový počet zastávok"),Tt.forEach(h),Ke=M(Ve),ke=b(Ve,"P",{});var St=m(ke);Ie=D(St,we),St.forEach(h),Ve.forEach(h),Qe=M(te),ae=b(te,"DIV",{});var je=m(ae);Ee=b(je,"H3",{});var Mt=m(Ee);Xe=D(Mt,"Približná dĺžka trvania"),Mt.forEach(h),Ye=M(je),de=b(je,"P",{});var ot=m(de);De=D(ot,Pe),$e=D(ot," minút"),ot.forEach(h),je.forEach(h),xe=M(te),ee=b(te,"DIV",{});var Ue=m(ee);Te=b(Ue,"H3",{});var It=m(Te);et=D(It,"Typ"),It.forEach(h),tt=M(Ue),Q.l(Ue),Ue.forEach(h),te.forEach(h),H.forEach(h),P.forEach(h),this.h()},h(){i(u,"class","mb-8 text-4xl font-bold"),i(g,"d","M21 12H3m0 0l8.5-8.5M3 12l8.5 8.5"),i(g,"stroke-width","1.5"),i(g,"stroke-linecap","round"),i(g,"stroke-linejoin","round"),i(s,"width","24px"),i(s,"height","24px"),i(s,"viewBox","0 0 24 24"),i(s,"stroke-width","1.5"),i(s,"fill","none"),i(s,"xmlns","http://www.w3.org/2000/svg"),i(c,"type","button"),i(c,"class","flex items-center gap-2 stroke-neutral-400 text-neutral-400 hover:stroke-neutral-100 hover:text-neutral-100"),ct(z.src,y="https://sacr3-files.s3-eu-west-1.amazonaws.com/_processed_/csm_TT.korzo_93c23fef75.jpg")||i(z,"src",y),i(z,"class","my-4 aspect-auto max-h-64 w-full rounded-lg object-cover"),i(z,"alt","Trnava"),i(L,"class","flex items-center gap-4"),i(w,"class","mb-2 flex items-center justify-between gap-4"),i(k,"class","mb-4 border-b border-neutral-800 pb-4"),i(fe,"class","mb-2"),i(ne,"class","text-neutral-400"),i(he,"class","grow basis-2/6"),i($,"class","flex justify-between gap-32"),i(Y,"class","mb-4 border-b border-neutral-800 pb-4"),i(U,"class","grid grid-cols-3 gap-6"),i(r,"class","w-full"),i(n,"class",Oe="flex items-center flex-col py-8 mx-48 "+(o[4]?"opacity-25":""))},m(p,P){rt(e,p,P),N(p,l,P),N(p,n,P),a(n,u),a(u,_),a(n,d),a(n,r),a(r,c),a(c,s),a(s,g),a(c,f),a(r,T),a(r,z),a(r,E),a(r,w),a(w,C),a(C,Z),a(w,ge),a(w,L),rt(F,L,null),a(L,pe),B&&B.m(L,null),a(r,me),a(r,k),a(k,W),a(r,Ce),a(r,Y),a(Y,fe),a(fe,Le),a(Y,Ae),a(Y,$),a($,he),a(he,ne);for(let G=0;G<R.length;G+=1)R[G]&&R[G].m(ne,null);a($,Ge),rt(J,$,null),a(r,Fe),a(r,U),a(U,x),a(x,ve),a(ve,qe),a(x,Ze),A.m(x,null),a(U,We),a(U,se),a(se,be),a(be,Je),a(se,Ke),a(se,ke),a(ke,Ie),a(U,Qe),a(U,ae),a(ae,Ee),a(Ee,Xe),a(ae,Ye),a(ae,de),a(de,De),a(de,$e),a(U,xe),a(U,ee),a(ee,Te),a(Te,et),a(ee,tt),Q.m(ee,null),K=!0,lt||(_t=q(c,"click",ue(pl)),lt=!0)},p(p,P){const G={};P[0]&33|P[1]&1&&(G.$$scope={dirty:P,ctx:p}),!t&&P[0]&16&&(t=!0,G.showModal=p[4],Xt(()=>t=!1)),e.$set(G),(!K||P[0]&2)&&j!==(j=p[1].name+"")&&ie(Z,j);const H={};if(P[0]&2&&(H.tour=p[1]),P[0]&4&&(H.status=p[2]),F.$set(H),p[2]==="FINISHED"?B?B.p(p,P):(B=Lt(p),B.c(),B.m(L,null)):B&&(B.d(1),B=null),(!K||P[0]&2)&&O!==(O=p[1].description+"")&&ie(W,O),P[0]&1162){_e=[...p[1].mapPoints];let V;for(V=0;V<_e.length;V+=1){const re=Ht(p,_e,V);R[V]?R[V].p(re,P):(R[V]=At(re),R[V].c(),R[V].m(ne,null))}for(;V<R.length;V+=1)R[V].d(1);R.length=_e.length}const X={};P[0]&8&&(X.mapPoint=p[3]),P[0]&8&&(X.visited=p[9](p[3].name)),P[0]&4&&(X.status=p[2]),P[0]&64&&(X.ongoingTour=p[6]),J.$set(X),ye===(ye=pt(p))&&A?A.p(p,P):(A.d(1),A=ye(p),A&&(A.c(),A.m(x,null))),(!K||P[0]&2)&&we!==(we=p[1].mapPoints.size+"")&&ie(Ie,we),(!K||P[0]&2)&&Pe!==(Pe=p[1].approximateLength+"")&&ie(De,Pe),Ne!==(Ne=mt(p))&&(Q.d(1),Q=Ne(p),Q&&(Q.c(),Q.m(ee,null))),(!K||P[0]&16&&Oe!==(Oe="flex items-center flex-col py-8 mx-48 "+(p[4]?"opacity-25":"")))&&i(n,"class",Oe)},i(p){K||(Se(e.$$.fragment,p),Se(F.$$.fragment,p),Se(J.$$.fragment,p),K=!0)},o(p){Me(e.$$.fragment,p),Me(F.$$.fragment,p),Me(J.$$.fragment,p),K=!1},d(p){it(e,p),p&&h(l),p&&h(n),it(F),B&&B.d(),ut(R,p),it(J),A.d(),Q.d(),lt=!1,_t()}}}function pl(){history.back()}function ml(o,e,t){let l,n,u,{data:_}=e;const d=parseInt(_.tourId);let r=ServiceManager.getTourService().getTour(d);console.log(r);let c=ServiceManager.getTourService().getUserTourRelationshipString(d);console.log(c);let s=xt(void 0);Rt(o,s,k=>t(6,n=k)),c=="IN_PROGRESS"&&(s.set(ServiceManager.getTourService().getOngoingTour(d)),console.log(n));let g=r.mapPoints.get(0);console.log(g);function f(k){if(console.log("hasVisited: ",k),console.log(n),c=="IN_PROGRESS"){for(let O=0;O<n.visitedMapPoints.length;O++)if(console.log("Checking: ",n.visitedMapPoints.at(O).name),n.visitedMapPoints.at(O).name==k)return!0}return!1}function T(k){console.log(k);for(let O=0;O<r.mapPoints.size;O++)console.log(r.mapPoints.get(O)),r.mapPoints.get(O).name==k&&(t(3,g=r.mapPoints.get(O)),console.log("Choosing: ",g))}function z(k){console.log("HANDLING UPDATE"),c=="IN_PROGRESS"&&(s.set(ServiceManager.getTourService().getOngoingTour(d)),t(2,c=ServiceManager.getTourService().getUserTourRelationshipString(d)),console.log(n))}const y=$t(s,k=>O=>c=="FINISHED"?`${O.name} ✓`:c!="IN_PROGRESS"?`${O.name}`:`${O.name} ${k.visitedMapPoints.some(W=>W.name===O.name)?"✓":""}`);Rt(o,y,k=>t(7,u=k));let E=!1,w=0;function C(){t(0,w=ServiceManager.getTourService().getRating(d)),console.log(w),t(4,E=!0)}function j(k){var O,W;ServiceManager.getTourService().rate(d,w),t(1,r=ServiceManager.getTourService().getTour(d)),E&&(t(4,E=!1),(W=(O=k.target.parentElement)==null?void 0:O.parentElement)==null||W.close())}const Z=k=>j(k),ge=k=>t(0,w=k+1),L=k=>t(0,w=w+k+1);function F(k){E=k,t(4,E)}const pe=()=>C(),me=k=>T(k.name);return o.$$set=k=>{"data"in k&&t(15,_=k.data)},o.$$.update=()=>{o.$$.dirty[0]&1&&t(5,l=5-w)},[w,r,c,g,E,l,n,u,s,f,T,z,y,C,j,_,Z,ge,L,F,pe,me]}class wl extends ft{constructor(e){super(),ht(this,e,ml,gl,dt,{data:15},null,[-1,-1])}}export{wl as default};
//# sourceMappingURL=tours-_tourId_-page.svelte.eb34db79.js.map
