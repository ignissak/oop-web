import{S as kt,i as wt,s as Et,k as v,q as S,a as P,l as b,m,r as I,h as f,c as T,n as i,b as z,G as s,u as te,H as ce,P as tl,N as vt,J as W,K as ue,C as Ct,Q as ll,R as ol,D as At,E as Gt,F as Lt,g as De,d as Oe,T as nl,U as sl,w as xt,V as al,y as _t,L as le,z as pt,M as oe,A as gt,W as rl,B as mt,O as bt,I as qt}from"../chunks/index.045d69d8.js";import{C as il}from"../chunks/ContextButton.538d4ef6.js";import{j as cl,w as ul}from"../chunks/singletons.abb1833a.js";function Ft(o){let e,t,l;return{c(){e=v("img"),this.h()},l(n){e=b(n,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){vt(e.src,t=o[2].image)||i(e,"src",t),i(e,"alt",l=o[2].name),i(e,"class","mb-2 aspect-auto rounded-lg object-cover")},m(n,h){z(n,e,h)},p(n,h){h&4&&!vt(e.src,t=n[2].image)&&i(e,"src",t),h&4&&l!==(l=n[2].name)&&i(e,"alt",l)},d(n){n&&f(e)}}}function fl(o){let e,t,l,n;return{c(){e=v("button"),t=S("Označiť ako navštívené ✓"),this.h()},l(h){e=b(h,"BUTTON",{type:!0,class:!0});var _=m(e);t=I(_,"Označiť ako navštívené ✓"),_.forEach(f),this.h()},h(){i(e,"type","button"),i(e,"class","text-neutral-400 hover:text-neutral-100")},m(h,_){z(h,e,_),s(e,t),l||(n=W(e,"click",ue(o[4])),l=!0)},p:ce,d(h){h&&f(e),l=!1,n()}}}function hl(o){let e,t;return{c(){e=v("p"),t=S("Označiť ako navštívené ✓"),this.h()},l(l){e=b(l,"P",{class:!0});var n=m(e);t=I(n,"Označiť ako navštívené ✓"),n.forEach(f),this.h()},h(){i(e,"class","cursor-not-allowed text-neutral-700")},m(l,n){z(l,e,n),s(e,t)},p:ce,d(l){l&&f(e)}}}function dl(o){let e,t,l=o[2].description+"",n,h,_,d,r,c,a,u=o[2].image!==null&&Ft(o);function g(O,y){if(O[0]===!0)return hl;if(O[3]==="IN_PROGRESS"&&O[1])return fl}let w=g(o),M=w&&w(o);return{c(){e=v("div"),t=v("p"),n=S(l),h=P(),u&&u.c(),_=P(),d=v("div"),r=v("a"),c=S("Zobraziť na mape ↗"),a=P(),M&&M.c(),this.h()},l(O){e=b(O,"DIV",{class:!0});var y=m(e);t=b(y,"P",{class:!0});var N=m(t);n=I(N,l),N.forEach(f),h=T(y),u&&u.l(y),_=T(y),d=b(y,"DIV",{class:!0});var j=m(d);r=b(j,"A",{href:!0,target:!0,class:!0});var C=m(r);c=I(C,"Zobraziť na mape ↗"),C.forEach(f),a=T(j),M&&M.l(j),j.forEach(f),y.forEach(f),this.h()},h(){i(t,"class","mb-2"),i(r,"href","http://maps.google.com/maps?z=12&t=m&q=loc:38.9419+-78.3020"),i(r,"target","_blank"),i(r,"class","text-neutral-400 hover:text-neutral-100"),i(d,"class","flex items-center justify-between"),i(e,"class","flex basis-4/6 flex-col")},m(O,y){z(O,e,y),s(e,t),s(t,n),s(e,h),u&&u.m(e,null),s(e,_),s(e,d),s(d,r),s(r,c),s(d,a),M&&M.m(d,null)},p(O,[y]){y&4&&l!==(l=O[2].description+"")&&te(n,l),O[2].image!==null?u?u.p(O,y):(u=Ft(O),u.c(),u.m(e,_)):u&&(u.d(1),u=null),w===(w=g(O))&&M?M.p(O,y):(M&&M.d(1),M=w&&w(O),M&&(M.c(),M.m(d,null)))},i:ce,o:ce,d(O){O&&f(e),u&&u.d(),M&&M.d()}}}function _l(o,e,t){let{ongoingTour:l}=e,{mapPoint:n}=e,{visited:h=!1}=e,{status:_}=e;const d=tl();function r(){t(0,h=!0),l.checkMapPoint(n.name),d("update",{})}return o.$$set=c=>{"ongoingTour"in c&&t(1,l=c.ongoingTour),"mapPoint"in c&&t(2,n=c.mapPoint),"visited"in c&&t(0,h=c.visited),"status"in c&&t(3,_=c.status)},[h,l,n,_,r]}class pl extends kt{constructor(e){super(),wt(this,e,_l,dl,Et,{ongoingTour:1,mapPoint:2,visited:0,status:3})}}const gl=o=>({}),Zt=o=>({});function ml(o){let e,t,l,n,h,_;const d=o[3].default,r=Ct(d,o,o[2],null),c=o[3].button,a=Ct(c,o,o[2],Zt);return{c(){e=v("dialog"),t=v("div"),r&&r.c(),l=P(),a&&a.c(),this.h()},l(u){e=b(u,"DIALOG",{class:!0});var g=m(e);t=b(g,"DIV",{class:!0});var w=m(t);r&&r.l(w),l=T(w),a&&a.l(w),w.forEach(f),g.forEach(f),this.h()},h(){i(t,"class","flex flex-col justify-center items-center"),i(e,"class","border-0 rounded-lg p-8 bg-neutral-800 shadow-lg max-w-lg text-neutral-100 fill-neutral-100 stroke-neutral-100")},m(u,g){z(u,e,g),s(e,t),r&&r.m(t,null),s(t,l),a&&a.m(t,null),o[5](e),n=!0,h||(_=[W(t,"click",ll(o[4])),W(e,"close",o[6]),W(e,"click",ol(o[7]))],h=!0)},p(u,[g]){r&&r.p&&(!n||g&4)&&At(r,d,u,u[2],n?Lt(d,u[2],g,null):Gt(u[2]),null),a&&a.p&&(!n||g&4)&&At(a,c,u,u[2],n?Lt(c,u[2],g,gl):Gt(u[2]),Zt)},i(u){n||(De(r,u),De(a,u),n=!0)},o(u){Oe(r,u),Oe(a,u),n=!1},d(u){u&&f(e),r&&r.d(u),a&&a.d(u),o[5](null),h=!1,nl(_)}}}function vl(o,e,t){let{$$slots:l={},$$scope:n}=e,{showModal:h}=e,_;function d(u){sl.call(this,o,u)}function r(u){xt[u?"unshift":"push"](()=>{_=u,t(1,_)})}const c=()=>t(0,h=!1),a=()=>_.close();return o.$$set=u=>{"showModal"in u&&t(0,h=u.showModal),"$$scope"in u&&t(2,n=u.$$scope)},o.$$.update=()=>{o.$$.dirty&3&&_&&h&&_.showModal()},[h,_,n,l,d,r,c,a]}class bl extends kt{constructor(e){super(),wt(this,e,vl,ml,Et,{showModal:0})}}function Wt(o,e,t){const l=o.slice();return l[23]=e[t][0],l[24]=e[t][1],l}function Jt(o,e,t){const l=o.slice();return l[27]=e[t],l[29]=t,l}function Kt(o,e,t){const l=o.slice();return l[27]=e[t],l[29]=t,l}function Qt(o){let e,t,l,n,h;function _(){return o[17](o[29])}return{c(){e=v("button"),t=le("svg"),l=le("path"),this.h()},l(d){e=b(d,"BUTTON",{type:!0});var r=m(e);t=oe(r,"svg",{xmlns:!0,viewBox:!0,class:!0});var c=m(t);l=oe(c,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),m(l).forEach(f),c.forEach(f),r.forEach(f),this.h()},h(){i(l,"fill-rule","evenodd"),i(l,"d","M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.007 5.404.433c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.433 2.082-5.006z"),i(l,"clip-rule","evenodd"),i(t,"xmlns","http://www.w3.org/2000/svg"),i(t,"viewBox","0 0 24 24"),i(t,"class","w-6 h-6"),i(e,"type","button")},m(d,r){z(d,e,r),s(e,t),s(t,l),n||(h=W(e,"click",ue(_)),n=!0)},p(d,r){o=d},d(d){d&&f(e),n=!1,h()}}}function Xt(o){let e,t,l,n,h,_;function d(){return o[18](o[29])}return{c(){e=v("button"),t=le("svg"),l=le("path"),n=P(),this.h()},l(r){e=b(r,"BUTTON",{type:!0});var c=m(e);t=oe(c,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,class:!0});var a=m(t);l=oe(a,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),m(l).forEach(f),a.forEach(f),n=T(c),c.forEach(f),this.h()},h(){i(l,"stroke-linecap","round"),i(l,"stroke-linejoin","round"),i(l,"d","M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z"),i(t,"xmlns","http://www.w3.org/2000/svg"),i(t,"fill","none"),i(t,"viewBox","0 0 24 24"),i(t,"stroke-width","1.5"),i(t,"class","w-6 h-6"),i(e,"type","button")},m(r,c){z(r,e,c),s(e,t),s(t,l),s(e,n),h||(_=W(e,"click",ue(d)),h=!0)},p(r,c){o=r},d(r){r&&f(e),h=!1,_()}}}function kl(o){let e,t,l,n,h,_=Array(o[0]),d=[];for(let a=0;a<_.length;a+=1)d[a]=Qt(Kt(o,_,a));let r=Array(o[5]),c=[];for(let a=0;a<r.length;a+=1)c[a]=Xt(Jt(o,r,a));return{c(){e=v("h2"),t=S("Hodnotenie výletu"),l=P(),n=v("div");for(let a=0;a<d.length;a+=1)d[a].c();h=P();for(let a=0;a<c.length;a+=1)c[a].c();this.h()},l(a){e=b(a,"H2",{class:!0});var u=m(e);t=I(u,"Hodnotenie výletu"),u.forEach(f),l=T(a),n=b(a,"DIV",{class:!0});var g=m(n);for(let w=0;w<d.length;w+=1)d[w].l(g);h=T(g);for(let w=0;w<c.length;w+=1)c[w].l(g);g.forEach(f),this.h()},h(){i(e,"class","text-xl font-semibold mb-4"),i(n,"class","flex items-center gap-1")},m(a,u){z(a,e,u),s(e,t),z(a,l,u),z(a,n,u);for(let g=0;g<d.length;g+=1)d[g]&&d[g].m(n,null);s(n,h);for(let g=0;g<c.length;g+=1)c[g]&&c[g].m(n,null)},p(a,u){if(u[0]&1){_=Array(a[0]);let g;for(g=0;g<_.length;g+=1){const w=Kt(a,_,g);d[g]?d[g].p(w,u):(d[g]=Qt(w),d[g].c(),d[g].m(n,h))}for(;g<d.length;g+=1)d[g].d(1);d.length=_.length}if(u[0]&33){r=Array(a[5]);let g;for(g=0;g<r.length;g+=1){const w=Jt(a,r,g);c[g]?c[g].p(w,u):(c[g]=Xt(w),c[g].c(),c[g].m(n,null))}for(;g<c.length;g+=1)c[g].d(1);c.length=r.length}},d(a){a&&f(e),a&&f(l),a&&f(n),bt(d,a),bt(c,a)}}}function wl(o){let e,t,l,n;return{c(){e=v("button"),t=S("Uložiť"),this.h()},l(h){e=b(h,"BUTTON",{slot:!0,class:!0});var _=m(e);t=I(_,"Uložiť"),_.forEach(f),this.h()},h(){i(e,"slot","button"),i(e,"class","rounded-lg mt-6 border border-neutral-600 hover:bg-neutral-600 py-1.5 px-3 w-full")},m(h,_){z(h,e,_),s(e,t),l||(n=W(e,"click",ue(o[16])),l=!0)},p:ce,d(h){h&&f(e),l=!1,n()}}}function Yt(o){let e,t,l,n,h,_;return{c(){e=v("button"),t=le("svg"),l=le("path"),n=S(`\r
                        Ohodnotiť`),this.h()},l(d){e=b(d,"BUTTON",{type:!0,class:!0});var r=m(e);t=oe(r,"svg",{width:!0,height:!0,"stroke-width":!0,viewBox:!0,fill:!0,xmlns:!0});var c=m(t);l=oe(c,"path",{d:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),m(l).forEach(f),c.forEach(f),n=I(r,`\r
                        Ohodnotiť`),r.forEach(f),this.h()},h(){i(l,"d","M8.587 8.236l2.598-5.232a.911.911 0 011.63 0l2.598 5.232 5.808.844a.902.902 0 01.503 1.542l-4.202 4.07.992 5.75c.127.738-.653 1.3-1.32.952L12 18.678l-5.195 2.716c-.666.349-1.446-.214-1.319-.953l.992-5.75-4.202-4.07a.902.902 0 01.503-1.54l5.808-.845z"),i(l,"stroke-width","1.5"),i(l,"stroke-linecap","round"),i(l,"stroke-linejoin","round"),i(t,"width","20px"),i(t,"height","20px"),i(t,"stroke-width","1.5"),i(t,"viewBox","0 0 24 24"),i(t,"fill","none"),i(t,"xmlns","http://www.w3.org/2000/svg"),i(e,"type","button"),i(e,"class","action-button")},m(d,r){z(d,e,r),s(e,t),s(t,l),s(e,n),h||(_=W(e,"click",ue(o[20])),h=!0)},p:ce,d(d){d&&f(e),h=!1,_()}}}function $t(o){let e,t=o[7](o[24])+"",l,n,h,_,d;function r(){return o[21](o[24])}return{c(){e=v("button"),l=S(t),n=P(),this.h()},l(c){e=b(c,"BUTTON",{type:!0,class:!0});var a=m(e);l=I(a,t),n=T(a),a.forEach(f),this.h()},h(){i(e,"type","button"),i(e,"class",h="cursor-pointer "+(o[3].name===o[24].name?"stop-selected":"hover:text-neutral-100"))},m(c,a){z(c,e,a),s(e,l),s(e,n),_||(d=W(e,"click",ue(r)),_=!0)},p(c,a){o=c,a[0]&130&&t!==(t=o[7](o[24])+"")&&te(l,t),a[0]&10&&h!==(h="cursor-pointer "+(o[3].name===o[24].name?"stop-selected":"hover:text-neutral-100"))&&i(e,"class",h)},d(c){c&&f(e),_=!1,d()}}}function El(o){let e,t=o[1].averageRating+"",l,n;return{c(){e=v("p"),l=S(t),n=S(" z 5")},l(h){e=b(h,"P",{});var _=m(e);l=I(_,t),n=I(_," z 5"),_.forEach(f)},m(h,_){z(h,e,_),s(e,l),s(e,n)},p(h,_){_[0]&2&&t!==(t=h[1].averageRating+"")&&te(l,t)},d(h){h&&f(e)}}}function Pl(o){let e,t;return{c(){e=v("p"),t=S("Žiadne hodnotenie")},l(l){e=b(l,"P",{});var n=m(e);t=I(n,"Žiadne hodnotenie"),n.forEach(f)},m(l,n){z(l,e,n),s(e,t)},p:ce,d(l){l&&f(e)}}}function Tl(o){let e,t;return{c(){e=v("p"),t=S("Dostupný pre všetkých")},l(l){e=b(l,"P",{});var n=m(e);t=I(n,"Dostupný pre všetkých"),n.forEach(f)},m(l,n){z(l,e,n),s(e,t)},d(l){l&&f(e)}}}function Sl(o){let e,t;return{c(){e=v("p"),t=S("Platený")},l(l){e=b(l,"P",{});var n=m(e);t=I(n,"Platený"),n.forEach(f)},m(l,n){z(l,e,n),s(e,t)},d(l){l&&f(e)}}}function Il(o){let e,t,l,n,h,_,d,r,c,a,u,g,w,M,O,y,N,j,C=o[1].name+"",fe,ge,A,q,me,ve,k,D=o[1].description+"",J,Ze,Y,he,We,Je,$,de,ne,Ke,K,Qe,U,x,be,Xe,Ye,$e,se,ke,xe,et,we,Ee=o[1].ownerUsername+"",Ne,tt,ae,Pe,lt,ot,Te,Se=o[1].mapPoints.size+"",ze,nt,re,Ie,st,at,_e,Me=o[1].approximateLength+"",He,rt,it,ee,ye,ct,ut,Ve,F,ft,Pt;function el(p){o[19](p)}let Tt={$$slots:{button:[wl],default:[kl]},$$scope:{ctx:o}};o[4]!==void 0&&(Tt.showModal=o[4]),e=new bl({props:Tt}),xt.push(()=>al(e,"showModal",el)),q=new il({props:{tour:o[1],status:o[2]}});let V=o[2]==="FINISHED"&&Yt(o),pe=[...o[1].mapPoints],H=[];for(let p=0;p<pe.length;p+=1)H[p]=$t(Wt(o,pe,p));K=new pl({props:{mapPoint:o[3],visited:o[9](o[3].name),status:o[2],ongoingTour:o[6]}}),K.$on("update",o[11]);function St(p,E){return p[1].averageRating===-1?Pl:El}let Be=St(o),G=Be(o);function It(p,E){return p[1].isPaidOnly===!0?Sl:Tl}let Re=It(o),Q=Re(o);return{c(){_t(e.$$.fragment),l=P(),n=v("main"),h=v("h1"),_=S("City Guide Walks"),d=P(),r=v("section"),c=v("button"),a=le("svg"),u=le("path"),g=S(`\r
            Späť`),w=P(),M=v("img"),y=P(),N=v("div"),j=v("h2"),fe=S(C),ge=P(),A=v("div"),_t(q.$$.fragment),me=P(),V&&V.c(),ve=P(),k=v("p"),J=S(D),Ze=P(),Y=v("section"),he=v("h3"),We=S("Zastávky"),Je=P(),$=v("section"),de=v("aside"),ne=v("div");for(let p=0;p<H.length;p+=1)H[p].c();Ke=P(),_t(K.$$.fragment),Qe=P(),U=v("div"),x=v("div"),be=v("h3"),Xe=S("Hodnotenie"),Ye=P(),G.c(),$e=P(),se=v("div"),ke=v("h3"),xe=S("Vytvoril"),et=P(),we=v("p"),Ne=S(Ee),tt=P(),ae=v("div"),Pe=v("h3"),lt=S("Celkový počet zastávok"),ot=P(),Te=v("p"),ze=S(Se),nt=P(),re=v("div"),Ie=v("h3"),st=S("Približná dĺžka trvania"),at=P(),_e=v("p"),He=S(Me),rt=S(" minút"),it=P(),ee=v("div"),ye=v("h3"),ct=S("Typ"),ut=P(),Q.c(),this.h()},l(p){pt(e.$$.fragment,p),l=T(p),n=b(p,"MAIN",{class:!0});var E=m(n);h=b(E,"H1",{class:!0});var L=m(h);_=I(L,"City Guide Walks"),L.forEach(f),d=T(E),r=b(E,"SECTION",{class:!0});var B=m(r);c=b(B,"BUTTON",{type:!0,class:!0});var X=m(c);a=oe(X,"svg",{width:!0,height:!0,viewBox:!0,"stroke-width":!0,fill:!0,xmlns:!0});var R=m(a);u=oe(R,"path",{d:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),m(u).forEach(f),R.forEach(f),g=I(X,`\r
            Späť`),X.forEach(f),w=T(B),M=b(B,"IMG",{src:!0,class:!0,alt:!0}),y=T(B),N=b(B,"DIV",{class:!0});var ie=m(N);j=b(ie,"H2",{});var Mt=m(j);fe=I(Mt,C),Mt.forEach(f),ge=T(ie),A=b(ie,"DIV",{class:!0});var Ue=m(A);pt(q.$$.fragment,Ue),me=T(Ue),V&&V.l(Ue),Ue.forEach(f),ie.forEach(f),ve=T(B),k=b(B,"P",{class:!0});var yt=m(k);J=I(yt,D),yt.forEach(f),Ze=T(B),Y=b(B,"SECTION",{class:!0});var je=m(Y);he=b(je,"H3",{class:!0});var Dt=m(he);We=I(Dt,"Zastávky"),Dt.forEach(f),Je=T(je),$=b(je,"SECTION",{class:!0});var Ce=m($);de=b(Ce,"ASIDE",{class:!0});var Ot=m(de);ne=b(Ot,"DIV",{class:!0});var Nt=m(ne);for(let dt=0;dt<H.length;dt+=1)H[dt].l(Nt);Nt.forEach(f),Ot.forEach(f),Ke=T(Ce),pt(K.$$.fragment,Ce),Ce.forEach(f),je.forEach(f),Qe=T(B),U=b(B,"DIV",{class:!0});var Z=m(U);x=b(Z,"DIV",{});var Ae=m(x);be=b(Ae,"H3",{});var zt=m(be);Xe=I(zt,"Hodnotenie"),zt.forEach(f),Ye=T(Ae),G.l(Ae),Ae.forEach(f),$e=T(Z),se=b(Z,"DIV",{});var Ge=m(se);ke=b(Ge,"H3",{});var Ht=m(ke);xe=I(Ht,"Vytvoril"),Ht.forEach(f),et=T(Ge),we=b(Ge,"P",{});var Vt=m(we);Ne=I(Vt,Ee),Vt.forEach(f),Ge.forEach(f),tt=T(Z),ae=b(Z,"DIV",{});var Le=m(ae);Pe=b(Le,"H3",{});var Bt=m(Pe);lt=I(Bt,"Celkový počet zastávok"),Bt.forEach(f),ot=T(Le),Te=b(Le,"P",{});var Rt=m(Te);ze=I(Rt,Se),Rt.forEach(f),Le.forEach(f),nt=T(Z),re=b(Z,"DIV",{});var qe=m(re);Ie=b(qe,"H3",{});var Ut=m(Ie);st=I(Ut,"Približná dĺžka trvania"),Ut.forEach(f),at=T(qe),_e=b(qe,"P",{});var ht=m(_e);He=I(ht,Me),rt=I(ht," minút"),ht.forEach(f),qe.forEach(f),it=T(Z),ee=b(Z,"DIV",{});var Fe=m(ee);ye=b(Fe,"H3",{});var jt=m(ye);ct=I(jt,"Typ"),jt.forEach(f),ut=T(Fe),Q.l(Fe),Fe.forEach(f),Z.forEach(f),B.forEach(f),E.forEach(f),this.h()},h(){i(h,"class","mb-8 text-4xl font-bold"),i(u,"d","M21 12H3m0 0l8.5-8.5M3 12l8.5 8.5"),i(u,"stroke-width","1.5"),i(u,"stroke-linecap","round"),i(u,"stroke-linejoin","round"),i(a,"width","24px"),i(a,"height","24px"),i(a,"viewBox","0 0 24 24"),i(a,"stroke-width","1.5"),i(a,"fill","none"),i(a,"xmlns","http://www.w3.org/2000/svg"),i(c,"type","button"),i(c,"class","flex items-center gap-2 stroke-neutral-400 text-neutral-400 hover:stroke-neutral-100 hover:text-neutral-100"),vt(M.src,O="https://sacr3-files.s3-eu-west-1.amazonaws.com/_processed_/csm_TT.korzo_93c23fef75.jpg")||i(M,"src",O),i(M,"class","my-4 aspect-auto max-h-64 w-full rounded-lg object-cover"),i(M,"alt","Trnava"),i(A,"class","flex items-center gap-4"),i(N,"class","mb-2 flex items-center justify-between gap-4"),i(k,"class","mb-4 border-b border-neutral-800 pb-4"),i(he,"class","mb-2"),i(ne,"class","text-neutral-400"),i(de,"class","grow basis-2/6"),i($,"class","flex justify-between gap-32"),i(Y,"class","mb-4 border-b border-neutral-800 pb-4"),i(U,"class","grid grid-cols-3 gap-6"),i(r,"class","w-full"),i(n,"class",Ve="flex items-center flex-col py-8 mx-48 "+(o[4]?"opacity-25":""))},m(p,E){gt(e,p,E),z(p,l,E),z(p,n,E),s(n,h),s(h,_),s(n,d),s(n,r),s(r,c),s(c,a),s(a,u),s(c,g),s(r,w),s(r,M),s(r,y),s(r,N),s(N,j),s(j,fe),s(N,ge),s(N,A),gt(q,A,null),s(A,me),V&&V.m(A,null),s(r,ve),s(r,k),s(k,J),s(r,Ze),s(r,Y),s(Y,he),s(he,We),s(Y,Je),s(Y,$),s($,de),s(de,ne);for(let L=0;L<H.length;L+=1)H[L]&&H[L].m(ne,null);s($,Ke),gt(K,$,null),s(r,Qe),s(r,U),s(U,x),s(x,be),s(be,Xe),s(x,Ye),G.m(x,null),s(U,$e),s(U,se),s(se,ke),s(ke,xe),s(se,et),s(se,we),s(we,Ne),s(U,tt),s(U,ae),s(ae,Pe),s(Pe,lt),s(ae,ot),s(ae,Te),s(Te,ze),s(U,nt),s(U,re),s(re,Ie),s(Ie,st),s(re,at),s(re,_e),s(_e,He),s(_e,rt),s(U,it),s(U,ee),s(ee,ye),s(ye,ct),s(ee,ut),Q.m(ee,null),F=!0,ft||(Pt=W(c,"click",ue(Ml)),ft=!0)},p(p,E){const L={};E[0]&33|E[1]&1&&(L.$$scope={dirty:E,ctx:p}),!t&&E[0]&16&&(t=!0,L.showModal=p[4],rl(()=>t=!1)),e.$set(L),(!F||E[0]&2)&&C!==(C=p[1].name+"")&&te(fe,C);const B={};if(E[0]&2&&(B.tour=p[1]),E[0]&4&&(B.status=p[2]),q.$set(B),p[2]==="FINISHED"?V?V.p(p,E):(V=Yt(p),V.c(),V.m(A,null)):V&&(V.d(1),V=null),(!F||E[0]&2)&&D!==(D=p[1].description+"")&&te(J,D),E[0]&1162){pe=[...p[1].mapPoints];let R;for(R=0;R<pe.length;R+=1){const ie=Wt(p,pe,R);H[R]?H[R].p(ie,E):(H[R]=$t(ie),H[R].c(),H[R].m(ne,null))}for(;R<H.length;R+=1)H[R].d(1);H.length=pe.length}const X={};E[0]&8&&(X.mapPoint=p[3]),E[0]&8&&(X.visited=p[9](p[3].name)),E[0]&4&&(X.status=p[2]),E[0]&64&&(X.ongoingTour=p[6]),K.$set(X),Be===(Be=St(p))&&G?G.p(p,E):(G.d(1),G=Be(p),G&&(G.c(),G.m(x,null))),(!F||E[0]&2)&&Ee!==(Ee=p[1].ownerUsername+"")&&te(Ne,Ee),(!F||E[0]&2)&&Se!==(Se=p[1].mapPoints.size+"")&&te(ze,Se),(!F||E[0]&2)&&Me!==(Me=p[1].approximateLength+"")&&te(He,Me),Re!==(Re=It(p))&&(Q.d(1),Q=Re(p),Q&&(Q.c(),Q.m(ee,null))),(!F||E[0]&16&&Ve!==(Ve="flex items-center flex-col py-8 mx-48 "+(p[4]?"opacity-25":"")))&&i(n,"class",Ve)},i(p){F||(De(e.$$.fragment,p),De(q.$$.fragment,p),De(K.$$.fragment,p),F=!0)},o(p){Oe(e.$$.fragment,p),Oe(q.$$.fragment,p),Oe(K.$$.fragment,p),F=!1},d(p){mt(e,p),p&&f(l),p&&f(n),mt(q),V&&V.d(),bt(H,p),mt(K),G.d(),Q.d(),ft=!1,Pt()}}}function Ml(){history.back()}function yl(o,e,t){let l,n,h,{data:_}=e;const d=parseInt(_.tourId);let r=ServiceManager.getTourService().getTour(d);console.log(r);let c=ServiceManager.getTourService().getUserTourRelationshipString(d);console.log(c);let a=ul(void 0);qt(o,a,k=>t(6,n=k)),c=="IN_PROGRESS"&&(a.set(ServiceManager.getTourService().getOngoingTour(d)),console.log(n));let u=r.mapPoints.get(0);console.log(u);function g(k){if(console.log("hasVisited: ",k),console.log(n),c=="IN_PROGRESS"){for(let D=0;D<n.visitedMapPoints.length;D++)if(console.log("Checking: ",n.visitedMapPoints.at(D).name),n.visitedMapPoints.at(D).name==k)return!0}return!1}function w(k){console.log(k);for(let D=0;D<r.mapPoints.size;D++)console.log(r.mapPoints.get(D)),r.mapPoints.get(D).name==k&&(t(3,u=r.mapPoints.get(D)),console.log("Choosing: ",u))}function M(k){console.log("HANDLING UPDATE"),c=="IN_PROGRESS"&&(a.set(ServiceManager.getTourService().getOngoingTour(d)),t(2,c=ServiceManager.getTourService().getUserTourRelationshipString(d)),console.log(n))}const O=cl(a,k=>D=>c=="FINISHED"?`${D.name} ✓`:c!="IN_PROGRESS"?`${D.name}`:`${D.name} ${k.visitedMapPoints.some(J=>J.name===D.name)?"✓":""}`);qt(o,O,k=>t(7,h=k));let y=!1,N=0;function j(){t(0,N=ServiceManager.getTourService().getRating(d)),console.log(N),t(4,y=!0)}function C(k){var D,J;ServiceManager.getTourService().rate(d,N),t(1,r=ServiceManager.getTourService().getTour(d)),y&&(t(4,y=!1),(J=(D=k.target.parentElement)==null?void 0:D.parentElement)==null||J.close())}const fe=k=>C(k),ge=k=>t(0,N=k+1),A=k=>t(0,N=N+k+1);function q(k){y=k,t(4,y)}const me=()=>j(),ve=k=>w(k.name);return o.$$set=k=>{"data"in k&&t(15,_=k.data)},o.$$.update=()=>{o.$$.dirty[0]&1&&t(5,l=5-N)},[N,r,c,u,y,l,n,h,a,g,w,M,O,j,C,_,fe,ge,A,q,me,ve]}class zl extends kt{constructor(e){super(),wt(this,e,yl,Il,Et,{data:15},null,[-1,-1])}}export{zl as default};
//# sourceMappingURL=tours-_tourId_-page.svelte.56e9ddd7.js.map
