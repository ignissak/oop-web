import{S as ht,i as dt,s as _t,k as v,q as M,a as T,l as b,m,r as y,h,c as I,n as i,b as N,G as a,u as ie,H as ce,R as Zt,N as Ce,J as Z,K as ue,C as Ot,T as Wt,U as Jt,D as Dt,E as Nt,F as Rt,g as Te,d as Ie,V as Kt,W as Qt,w as Ft,X as Xt,y as rt,L as le,z as it,M as oe,A as ct,Y as Yt,P as $t,B as ut,O as ft,I as zt,Q as xt}from"../chunks/index.52f7e420.js";import{C as el,f as tl}from"../chunks/index.53656d51.js";import{w as ll,j as ol}from"../chunks/singletons.cd0db052.js";const nl=!1,sl=!1,al=async({params:l})=>({tourId:l.tourId}),yl=Object.freeze(Object.defineProperty({__proto__:null,load:al,prerender:nl,ssr:sl},Symbol.toStringTag,{value:"Module"}));function Bt(l){let e,t,o;return{c(){e=v("img"),this.h()},l(n){e=b(n,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Ce(e.src,t=l[2].image)||i(e,"src",t),i(e,"alt",o=l[2].name),i(e,"class","mb-2 aspect-auto rounded-lg object-cover")},m(n,u){N(n,e,u)},p(n,u){u&4&&!Ce(e.src,t=n[2].image)&&i(e,"src",t),u&4&&o!==(o=n[2].name)&&i(e,"alt",o)},d(n){n&&h(e)}}}function rl(l){let e,t,o,n;return{c(){e=v("button"),t=M("Označiť ako navštívené ✓"),this.h()},l(u){e=b(u,"BUTTON",{type:!0,class:!0});var _=m(e);t=y(_,"Označiť ako navštívené ✓"),_.forEach(h),this.h()},h(){i(e,"type","button"),i(e,"class","text-neutral-400 hover:text-neutral-100")},m(u,_){N(u,e,_),a(e,t),o||(n=Z(e,"click",ue(l[4])),o=!0)},p:ce,d(u){u&&h(e),o=!1,n()}}}function il(l){let e,t;return{c(){e=v("p"),t=M("Označiť ako navštívené ✓"),this.h()},l(o){e=b(o,"P",{class:!0});var n=m(e);t=y(n,"Označiť ako navštívené ✓"),n.forEach(h),this.h()},h(){i(e,"class","cursor-not-allowed text-neutral-700")},m(o,n){N(o,e,n),a(e,t)},p:ce,d(o){o&&h(e)}}}function cl(l){let e,t,o=l[2].description+"",n,u,_,d,r,c,s,g,f=l[2].image!==null&&Bt(l);function S(P,w){if(P[0]===!0)return il;if(P[3]==="IN_PROGRESS"&&P[1])return rl}let R=S(l),O=R&&R(l);return{c(){e=v("div"),t=v("p"),n=M(o),u=T(),f&&f.c(),_=T(),d=v("div"),r=v("a"),c=M("Zobraziť na mape ↗"),g=T(),O&&O.c(),this.h()},l(P){e=b(P,"DIV",{class:!0});var w=m(e);t=b(w,"P",{class:!0});var C=m(t);n=y(C,o),C.forEach(h),u=I(w),f&&f.l(w),_=I(w),d=b(w,"DIV",{class:!0});var j=m(d);r=b(j,"A",{href:!0,target:!0,class:!0});var W=m(r);c=y(W,"Zobraziť na mape ↗"),W.forEach(h),g=I(j),O&&O.l(j),j.forEach(h),w.forEach(h),this.h()},h(){i(t,"class","mb-2"),i(r,"href",s="http://maps.google.com/maps?z=12&t=m&q=loc:"+l[2].getLatitude()+"+"+l[2].getLongitude()),i(r,"target","_blank"),i(r,"class","text-neutral-400 hover:text-neutral-100"),i(d,"class","flex items-center justify-between"),i(e,"class","flex basis-4/6 flex-col")},m(P,w){N(P,e,w),a(e,t),a(t,n),a(e,u),f&&f.m(e,null),a(e,_),a(e,d),a(d,r),a(r,c),a(d,g),O&&O.m(d,null)},p(P,[w]){w&4&&o!==(o=P[2].description+"")&&ie(n,o),P[2].image!==null?f?f.p(P,w):(f=Bt(P),f.c(),f.m(e,_)):f&&(f.d(1),f=null),w&4&&s!==(s="http://maps.google.com/maps?z=12&t=m&q=loc:"+P[2].getLatitude()+"+"+P[2].getLongitude())&&i(r,"href",s),R===(R=S(P))&&O?O.p(P,w):(O&&O.d(1),O=R&&R(P),O&&(O.c(),O.m(d,null)))},i:ce,o:ce,d(P){P&&h(e),f&&f.d(),O&&O.d()}}}function ul(l,e,t){let{ongoingTour:o}=e,{mapPoint:n}=e,{visited:u=!1}=e,{status:_}=e;const d=Zt();function r(){t(0,u=!0),console.log(o),o.checkMapPoint(n.name),console.log("Marking as visited..."),d("update",{})}return l.$$set=c=>{"ongoingTour"in c&&t(1,o=c.ongoingTour),"mapPoint"in c&&t(2,n=c.mapPoint),"visited"in c&&t(0,u=c.visited),"status"in c&&t(3,_=c.status)},[u,o,n,_,r]}class fl extends ht{constructor(e){super(),dt(this,e,ul,cl,_t,{ongoingTour:1,mapPoint:2,visited:0,status:3})}}const hl=l=>({}),Ht=l=>({});function dl(l){let e,t,o,n,u,_;const d=l[3].default,r=Ot(d,l,l[2],null),c=l[3].button,s=Ot(c,l,l[2],Ht);return{c(){e=v("dialog"),t=v("div"),r&&r.c(),o=T(),s&&s.c(),this.h()},l(g){e=b(g,"DIALOG",{class:!0});var f=m(e);t=b(f,"DIV",{class:!0});var S=m(t);r&&r.l(S),o=I(S),s&&s.l(S),S.forEach(h),f.forEach(h),this.h()},h(){i(t,"class","flex flex-col justify-center items-center"),i(e,"class","border-0 rounded-lg p-8 bg-neutral-800 shadow-lg max-w-lg text-neutral-100 fill-neutral-100 stroke-neutral-100 svelte-1sqmprl")},m(g,f){N(g,e,f),a(e,t),r&&r.m(t,null),a(t,o),s&&s.m(t,null),l[5](e),n=!0,u||(_=[Z(t,"click",Wt(l[4])),Z(e,"close",l[6]),Z(e,"click",Jt(l[7]))],u=!0)},p(g,[f]){r&&r.p&&(!n||f&4)&&Dt(r,d,g,g[2],n?Rt(d,g[2],f,null):Nt(g[2]),null),s&&s.p&&(!n||f&4)&&Dt(s,c,g,g[2],n?Rt(c,g[2],f,hl):Nt(g[2]),Ht)},i(g){n||(Te(r,g),Te(s,g),n=!0)},o(g){Ie(r,g),Ie(s,g),n=!1},d(g){g&&h(e),r&&r.d(g),s&&s.d(g),l[5](null),u=!1,Kt(_)}}}function _l(l,e,t){let{$$slots:o={},$$scope:n}=e,{showModal:u}=e,_;function d(g){Qt.call(this,l,g)}function r(g){Ft[g?"unshift":"push"](()=>{_=g,t(1,_)})}const c=()=>t(0,u=!1),s=()=>_.close();return l.$$set=g=>{"showModal"in g&&t(0,u=g.showModal),"$$scope"in g&&t(2,n=g.$$scope)},l.$$.update=()=>{l.$$.dirty&3&&_&&u&&_.showModal()},[u,_,n,o,d,r,c,s]}class gl extends ht{constructor(e){super(),dt(this,e,_l,dl,_t,{showModal:0})}}function Vt(l,e,t){const o=l.slice();return o[23]=e[t][0],o[24]=e[t][1],o}function jt(l,e,t){const o=l.slice();return o[27]=e[t],o[29]=t,o}function Ut(l,e,t){const o=l.slice();return o[27]=e[t],o[29]=t,o}function Ct(l){let e,t,o,n,u;function _(){return l[17](l[29])}return{c(){e=v("button"),t=le("svg"),o=le("path"),this.h()},l(d){e=b(d,"BUTTON",{type:!0});var r=m(e);t=oe(r,"svg",{xmlns:!0,viewBox:!0,class:!0});var c=m(t);o=oe(c,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),m(o).forEach(h),c.forEach(h),r.forEach(h),this.h()},h(){i(o,"fill-rule","evenodd"),i(o,"d","M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.007 5.404.433c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.433 2.082-5.006z"),i(o,"clip-rule","evenodd"),i(t,"xmlns","http://www.w3.org/2000/svg"),i(t,"viewBox","0 0 24 24"),i(t,"class","w-6 h-6"),i(e,"type","button")},m(d,r){N(d,e,r),a(e,t),a(t,o),n||(u=Z(e,"click",ue(_)),n=!0)},p(d,r){l=d},d(d){d&&h(e),n=!1,u()}}}function Lt(l){let e,t,o,n,u,_;function d(){return l[18](l[29])}return{c(){e=v("button"),t=le("svg"),o=le("path"),n=T(),this.h()},l(r){e=b(r,"BUTTON",{type:!0});var c=m(e);t=oe(c,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,class:!0});var s=m(t);o=oe(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),m(o).forEach(h),s.forEach(h),n=I(c),c.forEach(h),this.h()},h(){i(o,"stroke-linecap","round"),i(o,"stroke-linejoin","round"),i(o,"d","M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z"),i(t,"xmlns","http://www.w3.org/2000/svg"),i(t,"fill","none"),i(t,"viewBox","0 0 24 24"),i(t,"stroke-width","1.5"),i(t,"class","w-6 h-6"),i(e,"type","button")},m(r,c){N(r,e,c),a(e,t),a(t,o),a(e,n),u||(_=Z(e,"click",ue(d)),u=!0)},p(r,c){l=r},d(r){r&&h(e),u=!1,_()}}}function pl(l){let e,t,o,n,u,_=Array(l[0]),d=[];for(let s=0;s<_.length;s+=1)d[s]=Ct(Ut(l,_,s));let r=Array(l[5]),c=[];for(let s=0;s<r.length;s+=1)c[s]=Lt(jt(l,r,s));return{c(){e=v("h2"),t=M("Hodnotenie výletu"),o=T(),n=v("div");for(let s=0;s<d.length;s+=1)d[s].c();u=T();for(let s=0;s<c.length;s+=1)c[s].c();this.h()},l(s){e=b(s,"H2",{class:!0});var g=m(e);t=y(g,"Hodnotenie výletu"),g.forEach(h),o=I(s),n=b(s,"DIV",{class:!0});var f=m(n);for(let S=0;S<d.length;S+=1)d[S].l(f);u=I(f);for(let S=0;S<c.length;S+=1)c[S].l(f);f.forEach(h),this.h()},h(){i(e,"class","text-xl font-semibold mb-4"),i(n,"class","flex items-center gap-1")},m(s,g){N(s,e,g),a(e,t),N(s,o,g),N(s,n,g);for(let f=0;f<d.length;f+=1)d[f]&&d[f].m(n,null);a(n,u);for(let f=0;f<c.length;f+=1)c[f]&&c[f].m(n,null)},p(s,g){if(g[0]&1){_=Array(s[0]);let f;for(f=0;f<_.length;f+=1){const S=Ut(s,_,f);d[f]?d[f].p(S,g):(d[f]=Ct(S),d[f].c(),d[f].m(n,u))}for(;f<d.length;f+=1)d[f].d(1);d.length=_.length}if(g[0]&33){r=Array(s[5]);let f;for(f=0;f<r.length;f+=1){const S=jt(s,r,f);c[f]?c[f].p(S,g):(c[f]=Lt(S),c[f].c(),c[f].m(n,null))}for(;f<c.length;f+=1)c[f].d(1);c.length=r.length}},d(s){s&&h(e),s&&h(o),s&&h(n),ft(d,s),ft(c,s)}}}function ml(l){let e,t,o,n;return{c(){e=v("button"),t=M("Uložiť"),this.h()},l(u){e=b(u,"BUTTON",{slot:!0,class:!0});var _=m(e);t=y(_,"Uložiť"),_.forEach(h),this.h()},h(){i(e,"slot","button"),i(e,"class","rounded-lg mt-6 border border-neutral-600 hover:bg-neutral-600 py-1.5 px-3 w-full")},m(u,_){N(u,e,_),a(e,t),o||(n=Z(e,"click",ue(l[16])),o=!0)},p:ce,d(u){u&&h(e),o=!1,n()}}}function At(l){let e,t,o,n,u,_;return{c(){e=v("button"),t=le("svg"),o=le("path"),n=M(`\r
                        Ohodnotiť`),this.h()},l(d){e=b(d,"BUTTON",{type:!0,class:!0});var r=m(e);t=oe(r,"svg",{width:!0,height:!0,"stroke-width":!0,viewBox:!0,fill:!0,xmlns:!0});var c=m(t);o=oe(c,"path",{d:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),m(o).forEach(h),c.forEach(h),n=y(r,`\r
                        Ohodnotiť`),r.forEach(h),this.h()},h(){i(o,"d","M8.587 8.236l2.598-5.232a.911.911 0 011.63 0l2.598 5.232 5.808.844a.902.902 0 01.503 1.542l-4.202 4.07.992 5.75c.127.738-.653 1.3-1.32.952L12 18.678l-5.195 2.716c-.666.349-1.446-.214-1.319-.953l.992-5.75-4.202-4.07a.902.902 0 01.503-1.54l5.808-.845z"),i(o,"stroke-width","1.5"),i(o,"stroke-linecap","round"),i(o,"stroke-linejoin","round"),i(t,"width","20px"),i(t,"height","20px"),i(t,"stroke-width","1.5"),i(t,"viewBox","0 0 24 24"),i(t,"fill","none"),i(t,"xmlns","http://www.w3.org/2000/svg"),i(e,"type","button"),i(e,"class","action-button")},m(d,r){N(d,e,r),a(e,t),a(t,o),a(e,n),u||(_=Z(e,"click",ue(l[20])),u=!0)},p:ce,d(d){d&&h(e),u=!1,_()}}}function Gt(l){let e,t=l[7](l[24])+"",o,n,u,_,d;function r(){return l[21](l[24])}return{c(){e=v("button"),o=M(t),n=T(),this.h()},l(c){e=b(c,"BUTTON",{type:!0,class:!0});var s=m(e);o=y(s,t),n=I(s),s.forEach(h),this.h()},h(){i(e,"type","button"),i(e,"class",u="cursor-pointer block text-left "+(l[3].name===l[24].name?"stop-selected":"hover:text-neutral-100"))},m(c,s){N(c,e,s),a(e,o),a(e,n),_||(d=Z(e,"click",ue(r)),_=!0)},p(c,s){l=c,s[0]&130&&t!==(t=l[7](l[24])+"")&&ie(o,t),s[0]&10&&u!==(u="cursor-pointer block text-left "+(l[3].name===l[24].name?"stop-selected":"hover:text-neutral-100"))&&i(e,"class",u)},d(c){c&&h(e),_=!1,d()}}}function vl(l){let e,t=(l[1].averageRating%1===0?l[1].averageRating.toFixed(0):l[1].averageRating.toFixed(2))+"",o,n;return{c(){e=v("p"),o=M(t),n=M(" z 5")},l(u){e=b(u,"P",{});var _=m(e);o=y(_,t),n=y(_," z 5"),_.forEach(h)},m(u,_){N(u,e,_),a(e,o),a(e,n)},p(u,_){_[0]&2&&t!==(t=(u[1].averageRating%1===0?u[1].averageRating.toFixed(0):u[1].averageRating.toFixed(2))+"")&&ie(o,t)},d(u){u&&h(e)}}}function bl(l){let e,t;return{c(){e=v("p"),t=M("Žiadne hodnotenie")},l(o){e=b(o,"P",{});var n=m(e);t=y(n,"Žiadne hodnotenie"),n.forEach(h)},m(o,n){N(o,e,n),a(e,t)},p:ce,d(o){o&&h(e)}}}function kl(l){let e,t;return{c(){e=v("p"),t=M("Dostupný pre všetkých")},l(o){e=b(o,"P",{});var n=m(e);t=y(n,"Dostupný pre všetkých"),n.forEach(h)},m(o,n){N(o,e,n),a(e,t)},d(o){o&&h(e)}}}function wl(l){let e,t;return{c(){e=v("p"),t=M("Platený")},l(o){e=b(o,"P",{});var n=m(e);t=y(n,"Platený"),n.forEach(h)},m(o,n){N(o,e,n),a(e,t)},d(o){o&&h(e)}}}function El(l){let e,t,o,n,u,_,d,r,c,s,g,f,S,R,O,P,w,C,j=l[1].name+"",W,ge,L,F,pe,me,k,D=l[1].description+"",J,Le,Y,fe,Ae,Ge,$,he,ne,Fe,K,qe,U,x,ve,Ze,We,Je,se,be,Ke,Qe,ke,we=l[1].mapPoints.size+"",Me,Xe,ae,Ee,Ye,$e,de,Pe=l[1].approximateLength+"",ye,xe,et,ee,Se,tt,lt,Oe,ot,q,nt,gt;function qt(p){l[19](p)}let pt={$$slots:{button:[ml],default:[pl]},$$scope:{ctx:l}};l[4]!==void 0&&(pt.showModal=l[4]),e=new gl({props:pt}),Ft.push(()=>Xt(e,"showModal",qt)),F=new el({props:{tour:l[1],status:l[2]}});let B=l[2]==="FINISHED"&&At(l),_e=[...l[1].mapPoints],z=[];for(let p=0;p<_e.length;p+=1)z[p]=Gt(Vt(l,_e,p));K=new fl({props:{mapPoint:l[3],visited:l[9](l[3].name),status:l[2],ongoingTour:l[6]}}),K.$on("update",l[11]);function mt(p,E){return p[1].averageRating===-1?bl:vl}let De=mt(l),A=De(l);function vt(p,E){return p[1].isPaidOnly===!0?wl:kl}let Ne=vt(l),Q=Ne(l);return{c(){rt(e.$$.fragment),o=T(),n=v("main"),u=v("h1"),_=M("City Guide Walks"),d=T(),r=v("section"),c=v("button"),s=le("svg"),g=le("path"),f=M(`\r
            Späť`),S=T(),R=v("img"),P=T(),w=v("div"),C=v("h2"),W=M(j),ge=T(),L=v("div"),rt(F.$$.fragment),pe=T(),B&&B.c(),me=T(),k=v("p"),J=M(D),Le=T(),Y=v("section"),fe=v("h3"),Ae=M("Zastávky"),Ge=T(),$=v("section"),he=v("aside"),ne=v("div");for(let p=0;p<z.length;p+=1)z[p].c();Fe=T(),rt(K.$$.fragment),qe=T(),U=v("div"),x=v("div"),ve=v("h3"),Ze=M("Hodnotenie"),We=T(),A.c(),Je=T(),se=v("div"),be=v("h3"),Ke=M("Celkový počet zastávok"),Qe=T(),ke=v("p"),Me=M(we),Xe=T(),ae=v("div"),Ee=v("h3"),Ye=M("Približná dĺžka trvania"),$e=T(),de=v("p"),ye=M(Pe),xe=M(" minút"),et=T(),ee=v("div"),Se=v("h3"),tt=M("Typ"),lt=T(),Q.c(),this.h()},l(p){it(e.$$.fragment,p),o=I(p),n=b(p,"MAIN",{class:!0});var E=m(n);u=b(E,"H1",{class:!0});var G=m(u);_=y(G,"City Guide Walks"),G.forEach(h),d=I(E),r=b(E,"SECTION",{class:!0});var H=m(r);c=b(H,"BUTTON",{type:!0,class:!0});var X=m(c);s=oe(X,"svg",{width:!0,height:!0,viewBox:!0,"stroke-width":!0,fill:!0,xmlns:!0});var V=m(s);g=oe(V,"path",{d:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),m(g).forEach(h),V.forEach(h),f=y(X,`\r
            Späť`),X.forEach(h),S=I(H),R=b(H,"IMG",{src:!0,class:!0,alt:!0}),P=I(H),w=b(H,"DIV",{class:!0});var re=m(w);C=b(re,"H2",{});var bt=m(C);W=y(bt,j),bt.forEach(h),ge=I(re),L=b(re,"DIV",{class:!0});var Re=m(L);it(F.$$.fragment,Re),pe=I(Re),B&&B.l(Re),Re.forEach(h),re.forEach(h),me=I(H),k=b(H,"P",{class:!0});var kt=m(k);J=y(kt,D),kt.forEach(h),Le=I(H),Y=b(H,"SECTION",{class:!0});var ze=m(Y);fe=b(ze,"H3",{class:!0});var wt=m(fe);Ae=y(wt,"Zastávky"),wt.forEach(h),Ge=I(ze),$=b(ze,"SECTION",{class:!0});var Be=m($);he=b(Be,"ASIDE",{class:!0});var Et=m(he);ne=b(Et,"DIV",{class:!0});var Pt=m(ne);for(let at=0;at<z.length;at+=1)z[at].l(Pt);Pt.forEach(h),Et.forEach(h),Fe=I(Be),it(K.$$.fragment,Be),Be.forEach(h),ze.forEach(h),qe=I(H),U=b(H,"DIV",{class:!0});var te=m(U);x=b(te,"DIV",{});var He=m(x);ve=b(He,"H3",{});var St=m(ve);Ze=y(St,"Hodnotenie"),St.forEach(h),We=I(He),A.l(He),He.forEach(h),Je=I(te),se=b(te,"DIV",{});var Ve=m(se);be=b(Ve,"H3",{});var Tt=m(be);Ke=y(Tt,"Celkový počet zastávok"),Tt.forEach(h),Qe=I(Ve),ke=b(Ve,"P",{});var It=m(ke);Me=y(It,we),It.forEach(h),Ve.forEach(h),Xe=I(te),ae=b(te,"DIV",{});var je=m(ae);Ee=b(je,"H3",{});var Mt=m(Ee);Ye=y(Mt,"Približná dĺžka trvania"),Mt.forEach(h),$e=I(je),de=b(je,"P",{});var st=m(de);ye=y(st,Pe),xe=y(st," minút"),st.forEach(h),je.forEach(h),et=I(te),ee=b(te,"DIV",{});var Ue=m(ee);Se=b(Ue,"H3",{});var yt=m(Se);tt=y(yt,"Typ"),yt.forEach(h),lt=I(Ue),Q.l(Ue),Ue.forEach(h),te.forEach(h),H.forEach(h),E.forEach(h),this.h()},h(){i(u,"class","mb-8 text-4xl font-bold"),i(g,"d","M21 12H3m0 0l8.5-8.5M3 12l8.5 8.5"),i(g,"stroke-width","1.5"),i(g,"stroke-linecap","round"),i(g,"stroke-linejoin","round"),i(s,"width","24px"),i(s,"height","24px"),i(s,"viewBox","0 0 24 24"),i(s,"stroke-width","1.5"),i(s,"fill","none"),i(s,"xmlns","http://www.w3.org/2000/svg"),i(c,"type","button"),i(c,"class","flex items-center gap-2 stroke-neutral-400 text-neutral-400 hover:stroke-neutral-100 hover:text-neutral-100"),Ce(R.src,O=l[1].image)||i(R,"src",O),i(R,"class","my-4 aspect-auto max-h-64 w-full rounded-lg object-cover"),i(R,"alt","Trnava"),i(L,"class","flex items-center gap-4"),i(w,"class","mb-2 flex items-center justify-between gap-4"),i(k,"class","mb-4 border-b border-neutral-800 pb-4"),i(fe,"class","mb-2"),i(ne,"class","text-neutral-400"),i(he,"class","grow basis-2/6"),i($,"class","flex justify-between gap-32"),i(Y,"class","mb-4 border-b border-neutral-800 pb-4"),i(U,"class","grid grid-cols-3 gap-6"),i(r,"class","w-full"),i(n,"class",Oe="flex items-center flex-col py-8 mx-48 "+(l[4]?"opacity-25":""))},m(p,E){ct(e,p,E),N(p,o,E),N(p,n,E),a(n,u),a(u,_),a(n,d),a(n,r),a(r,c),a(c,s),a(s,g),a(c,f),a(r,S),a(r,R),a(r,P),a(r,w),a(w,C),a(C,W),a(w,ge),a(w,L),ct(F,L,null),a(L,pe),B&&B.m(L,null),a(r,me),a(r,k),a(k,J),a(r,Le),a(r,Y),a(Y,fe),a(fe,Ae),a(Y,Ge),a(Y,$),a($,he),a(he,ne);for(let G=0;G<z.length;G+=1)z[G]&&z[G].m(ne,null);a($,Fe),ct(K,$,null),a(r,qe),a(r,U),a(U,x),a(x,ve),a(ve,Ze),a(x,We),A.m(x,null),a(U,Je),a(U,se),a(se,be),a(be,Ke),a(se,Qe),a(se,ke),a(ke,Me),a(U,Xe),a(U,ae),a(ae,Ee),a(Ee,Ye),a(ae,$e),a(ae,de),a(de,ye),a(de,xe),a(U,et),a(U,ee),a(ee,Se),a(Se,tt),a(ee,lt),Q.m(ee,null),q=!0,nt||(gt=Z(c,"click",ue(Pl)),nt=!0)},p(p,E){const G={};E[0]&33|E[1]&1&&(G.$$scope={dirty:E,ctx:p}),!t&&E[0]&16&&(t=!0,G.showModal=p[4],Yt(()=>t=!1)),e.$set(G),(!q||E[0]&2&&!Ce(R.src,O=p[1].image))&&i(R,"src",O),(!q||E[0]&2)&&j!==(j=p[1].name+"")&&ie(W,j);const H={};if(E[0]&2&&(H.tour=p[1]),E[0]&4&&(H.status=p[2]),F.$set(H),p[2]==="FINISHED"?B?B.p(p,E):(B=At(p),B.c(),B.m(L,null)):B&&(B.d(1),B=null),(!q||E[0]&2)&&D!==(D=p[1].description+"")&&ie(J,D),E[0]&1162){_e=[...p[1].mapPoints];let V;for(V=0;V<_e.length;V+=1){const re=Vt(p,_e,V);z[V]?z[V].p(re,E):(z[V]=Gt(re),z[V].c(),z[V].m(ne,null))}for(;V<z.length;V+=1)z[V].d(1);z.length=_e.length}const X={};E[0]&8&&(X.mapPoint=p[3]),E[0]&8&&(X.visited=p[9](p[3].name)),E[0]&4&&(X.status=p[2]),E[0]&64&&(X.ongoingTour=p[6]),K.$set(X),De===(De=mt(p))&&A?A.p(p,E):(A.d(1),A=De(p),A&&(A.c(),A.m(x,null))),(!q||E[0]&2)&&we!==(we=p[1].mapPoints.size+"")&&ie(Me,we),(!q||E[0]&2)&&Pe!==(Pe=p[1].approximateLength+"")&&ie(ye,Pe),Ne!==(Ne=vt(p))&&(Q.d(1),Q=Ne(p),Q&&(Q.c(),Q.m(ee,null))),(!q||E[0]&16&&Oe!==(Oe="flex items-center flex-col py-8 mx-48 "+(p[4]?"opacity-25":"")))&&i(n,"class",Oe)},i(p){q||(Te(e.$$.fragment,p),Te(F.$$.fragment,p),Te(K.$$.fragment,p),ot||$t(()=>{ot=xt(n,tl,{}),ot.start()}),q=!0)},o(p){Ie(e.$$.fragment,p),Ie(F.$$.fragment,p),Ie(K.$$.fragment,p),q=!1},d(p){ut(e,p),p&&h(o),p&&h(n),ut(F),B&&B.d(),ft(z,p),ut(K),A.d(),Q.d(),nt=!1,gt()}}}function Pl(){history.back()}function Sl(l,e,t){let o,n,u,{data:_}=e;const d=parseInt(_.tourId);let r=ServiceManager.getTourService().getTour(d);console.log(r);let c=ServiceManager.getTourService().getUserTourRelationshipString(d);console.log(c);let s=ll(void 0);zt(l,s,k=>t(6,n=k)),c=="IN_PROGRESS"&&(s.set(ServiceManager.getTourService().getOngoingTour(d)),console.log(n));let g=r.mapPoints.get(0);console.log(g);function f(k){if(console.log("hasVisited: ",k),console.log(n),c=="IN_PROGRESS"){for(let D=0;D<n.visitedMapPoints.length;D++)if(console.log("Checking: ",n.visitedMapPoints.at(D).name),n.visitedMapPoints.at(D).name==k)return!0}return!1}function S(k){console.log(k);for(let D=0;D<r.mapPoints.size;D++)console.log(r.mapPoints.get(D)),r.mapPoints.get(D).name==k&&(t(3,g=r.mapPoints.get(D)),console.log("Choosing: ",g))}function R(k){console.log("HANDLING UPDATE"),c=="IN_PROGRESS"&&(s.set(ServiceManager.getTourService().getOngoingTour(d)),t(2,c=ServiceManager.getTourService().getUserTourRelationshipString(d)),console.log(n))}const O=ol(s,k=>D=>c=="FINISHED"?`${D.name} ✓`:c!="IN_PROGRESS"?`${D.name}`:`${D.name} ${k.visitedMapPoints.some(J=>J.name===D.name)?"✓":""}`);zt(l,O,k=>t(7,u=k));let P=!1,w=0;function C(){t(0,w=ServiceManager.getTourService().getRating(d)),console.log(w),t(4,P=!0)}function j(k){var D,J;ServiceManager.getTourService().rate(d,w),t(1,r=ServiceManager.getTourService().getTour(d)),P&&(t(4,P=!1),(J=(D=k.target.parentElement)==null?void 0:D.parentElement)==null||J.close())}const W=k=>j(k),ge=k=>t(0,w=k+1),L=k=>t(0,w=w+k+1);function F(k){P=k,t(4,P)}const pe=()=>C(),me=k=>S(k.name);return l.$$set=k=>{"data"in k&&t(15,_=k.data)},l.$$.update=()=>{l.$$.dirty[0]&1&&t(5,o=5-w)},[w,r,c,g,P,o,n,u,s,f,S,R,O,C,j,_,W,ge,L,F,pe,me]}class Ol extends ht{constructor(e){super(),dt(this,e,Sl,El,_t,{data:15},null,[-1,-1])}}export{Ol as component,yl as universal};
//# sourceMappingURL=9.5e452539.js.map
